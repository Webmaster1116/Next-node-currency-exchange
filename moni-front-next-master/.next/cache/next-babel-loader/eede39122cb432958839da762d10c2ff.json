{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router'; // import \"../Style/Navbar.css\";\n\nimport LoginContext from '../context/LoginContext';\nimport UserContext from '../context/UserContext';\nimport Axios from 'axios';\nimport Cookies from 'js-cookie';\n\nconst getData = async token => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const data = await Axios.get('https://api.moni.pe/api/auth', header);\n  return data.data;\n};\n\nconst Navbar = ({\n  router\n}) => {\n  const context = useContext(LoginContext);\n  const {\n    state\n  } = useContext(UserContext);\n  const {\n    0: islogin,\n    1: setIsLogin\n  } = useState(false);\n  const {\n    0: bg,\n    1: setBg\n  } = useState('rgba(7, 17, 39, 1)');\n  const {\n    0: name,\n    1: setName\n  } = useState('');\n\n  const init = async () => {\n    const coo = Cookies.get('token'); // console.log('coo', coo);\n\n    if (coo != undefined) {\n      try {\n        const data = await getData(coo); // console.log('name', data.name);\n\n        setName(data.name);\n        setIsLogin(true);\n      } catch (error) {\n        setIsLogin(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const listenScrollEvent = e => {\n    if (window.scrollY > 50) {\n      setBg('rgba(7, 17, 39, 1)');\n    } else {\n      setBg('rgba(7, 17, 39, 1)');\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', listenScrollEvent);\n  }, []);\n\n  const handleLogout = () => {\n    const res = Cookies.remove('token'); // console.log('logout', res);\n\n    if (router.pathname === '/' || router.pathname === '/index') {\n      window.location.reload();\n    } else {\n      Router.push('/');\n    }\n  };\n\n  return __jsx(\"header\", {\n    id: \"header\",\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'fixed-top'\n  }, __jsx(_JSXStyle, {\n    id: \"2705756368\",\n    dynamic: [bg]\n  }, [`#header.__jsx-style-dynamic-selector{background:${bg};}`]), __jsx(\"div\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'container'\n  }, __jsx(\"div\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'logo float-left'\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]])\n  }, __jsx(\"img\", {\n    src: require('../Data/img/Logo_text.png'),\n    alt: \"\",\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + ''\n  })))), __jsx(\"nav\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-menu float-right d-none d-lg-block'\n  }, __jsx(\"ul\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]])\n  }, __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]])\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-link'\n  }, \"Nosotros\"))), __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item'\n  }, __jsx(Link, {\n    href: \"/contact\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]])\n  }, \"Contacto\"))), __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item'\n  }, __jsx(Link, {\n    href: \"/operation\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-link'\n  }, \"Operaci\\xF3n\"))), islogin ? __jsx(React.Fragment, null, __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item'\n  }, __jsx(\"button\", {\n    onClick: handleLogout,\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'btn btn-logout'\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-link text-uppercase'\n  }, \"Cerrar Sesi\\xF3n\"))), __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item ml-5'\n  }, __jsx(Link, {\n    href: \"/operation\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'font-light nav-link btn outline-btn '\n  }, name)))) : __jsx(React.Fragment, null, __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item'\n  }, __jsx(\"a\", {\n    href: '/login',\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-link'\n  }, \"Iniciar sesi\\xF3n\")), __jsx(\"li\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item ml-5'\n  }, __jsx(Link, {\n    href: \"/register\"\n  }, __jsx(\"a\", {\n    className: \"jsx-3603265217 \" + _JSXStyle.dynamic([[\"2705756368\", [bg]]]) + \" \" + 'nav-item btn outline-btn'\n  }, \"Reg\\xEDstrate\"))))))), __jsx(_JSXStyle, {\n    id: \"3603265217\"\n  }, [\".btn-logout.jsx-3603265217{font-size:16px;margin:0%;padding:0%;}\"]));\n};\n\nexport default withRouter(Navbar);","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport Axios from 'axios';\nimport UserContext from '../../context/AdminContext';\nimport { confirmAlert } from 'react-confirm-alert';\nimport TopNavbar from './topNavbar';\nimport Cookies from 'js-cookie';\nimport AlertContext from '../../context/alert/alertContext';\nimport sendMail from '../genericFunctions/sendMail';\nimport getProfile from '../genericFunctions/getProfile';\nimport ViewPopup from './viewPopup';\nimport EditPopup from './editPopup';\nimport ExchangeModal from './exchangeRatePopup';\nimport DeletePopup from './deletePopup';\nimport moment from 'moment';\n\nvar getData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n    var header, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context.next = 3;\n            return Axios.get('https://api.moni.pe/api/agent/auth', header);\n\n          case 3:\n            data = _context.sent;\n            return _context.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getUserCount = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token) {\n    var header, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context2.next = 3;\n            return Axios.get('https://api.moni.pe/api/users/count', header);\n\n          case 3:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getUserCount(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar agentStatusChange = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(token, id, status) {\n    var header, stat, url, data;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            stat = status ? 'online' : 'offline';\n            url = 'https://api.moni.pe/api/agent/' + stat + '/' + id;\n            console.log(url);\n            _context3.next = 6;\n            return Axios.get(url, header);\n\n          case 6:\n            data = _context3.sent;\n            return _context3.abrupt(\"return\", data.data);\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function agentStatusChange(_x3, _x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar dashboard = function dashboard(props) {\n  var context = useContext(UserContext);\n\n  var _useState = useState([]),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var alertContext = useContext(AlertContext);\n  var setAlert = alertContext.setAlert,\n      alerts = alertContext.alerts;\n\n  var _useState2 = useState(''),\n      details = _useState2[0],\n      setDetails = _useState2[1];\n\n  var token = Cookies.get('adminToken');\n  var token2 = Cookies.get('agentToken');\n\n  var _useState3 = useState(false),\n      viewModal = _useState3[0],\n      setViewModal = _useState3[1];\n\n  var _useState4 = useState(false),\n      editModal = _useState4[0],\n      setEditModal = _useState4[1];\n\n  var _useState5 = useState(false),\n      deleteModal = _useState5[0],\n      setDeleteModal = _useState5[1];\n\n  var _useState6 = useState(false),\n      exchangeModal = _useState6[0],\n      setExchangeModal = _useState6[1];\n\n  var _useState7 = useState(''),\n      selected = _useState7[0],\n      setSelected = _useState7[1];\n\n  var _useState8 = useState(100),\n      userCount = _useState8[0],\n      setUserCount = _useState8[1];\n\n  var _useState9 = useState(100),\n      transactionCount = _useState9[0],\n      setTransactionCount = _useState9[1];\n\n  var _useState10 = useState('red'),\n      agentColor = _useState10[0],\n      setAgentColor = _useState10[1];\n\n  var _useState11 = useState(false),\n      agentStatus = _useState11[0],\n      setAgentStatus = _useState11[1];\n\n  var _useState12 = useState(''),\n      agentId = _useState12[0],\n      setAgentId = _useState12[1];\n\n  var _useState13 = useState('desconectado'),\n      agentBtnName = _useState13[0],\n      setAgentBtnName = _useState13[1];\n\n  var _useState14 = useState(0),\n      width = _useState14[0],\n      setWidth = _useState14[1];\n\n  var _useState15 = useState(''),\n      agentEnable = _useState15[0],\n      setAgentEnable = _useState15[1];\n\n  var _useState16 = useState(false),\n      admin = _useState16[0],\n      setAdmin = _useState16[1];\n\n  var _useState17 = useState({\n    display: 'none',\n    marginTop: '30px'\n  }),\n      topbar = _useState17[0],\n      setTopBar = _useState17[1];\n\n  var _useState18 = useState(0),\n      comissionDollars = _useState18[0],\n      setComissionDollars = _useState18[1];\n\n  var _useState19 = useState(0),\n      comissionSoles = _useState19[0],\n      setComissionSoles = _useState19[1];\n\n  var _useState20 = useState(0),\n      totalComm = _useState20[0],\n      setTotalComm = _useState20[1];\n\n  var _useState21 = useState(0),\n      totalCommSoles = _useState21[0],\n      setTotalCommSoles = _useState21[1];\n\n  var _useState22 = useState(10),\n      limit = _useState22[0],\n      setLimit = _useState22[1];\n\n  var _useState23 = useState(1),\n      page = _useState23[0],\n      setPage = _useState23[1];\n\n  var _useState24 = useState(false),\n      loading = _useState24[0],\n      setLoading = _useState24[1];\n\n  var init = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var data, users, comm, _users, agentData, agentid, _data, _comm, d1, res, res2;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(token !== undefined || token2 !== undefined)) {\n                _context4.next = 75;\n                break;\n              }\n\n              if (!(token2 === undefined)) {\n                _context4.next = 32;\n                break;\n              }\n\n              _context4.prev = 2;\n              setLoading(true);\n              console.log(page, limit, 'pg1');\n              _context4.next = 7;\n              return get_all_transactions(Cookies.get('adminToken'), page, limit);\n\n            case 7:\n              data = _context4.sent;\n              console.log(Cookies.get('adminToken'));\n              _context4.next = 11;\n              return getUserCount(Cookies.get('adminToken'));\n\n            case 11:\n              users = _context4.sent;\n              setUserCount(users);\n              setAdmin(true);\n              console.log(data);\n              setState(data);\n              _context4.next = 18;\n              return get_admin_commission(Cookies.get('adminToken'));\n\n            case 18:\n              comm = _context4.sent;\n              console.log(comm, 'cm');\n              setTransactionCount(data.length);\n              setTotalComm(comm.dollar);\n              setTotalCommSoles(comm.soles);\n              setLoading(false);\n              _context4.next = 30;\n              break;\n\n            case 26:\n              _context4.prev = 26;\n              _context4.t0 = _context4[\"catch\"](2);\n              console.log(_context4.t0);\n              setAlert('Algo sali√≥ mal', 'danger'); // const res = Cookies.remove(\"adminToken\");\n              // const res2 = Cookies.remove(\"agentToken\");\n              // window.location.href = \"/admin_login\";\n\n            case 30:\n              _context4.next = 73;\n              break;\n\n            case 32:\n              _context4.prev = 32;\n              setLoading(true);\n              _context4.next = 36;\n              return getUserCount(Cookies.get('agentToken'));\n\n            case 36:\n              _users = _context4.sent;\n              setUserCount(_users);\n              _context4.next = 40;\n              return getData(Cookies.get('agentToken'));\n\n            case 40:\n              agentData = _context4.sent;\n              agentid = agentData._id;\n              _context4.next = 44;\n              return get_agent_transactions(Cookies.get('agentToken'), agentData._id, page, limit);\n\n            case 44:\n              _data = _context4.sent;\n              console.log(agentData._id, 'id');\n              _context4.next = 48;\n              return get_agent_commission(Cookies.get('agentToken'), agentData._id);\n\n            case 48:\n              _comm = _context4.sent;\n              setAgentId(agentData._id);\n              setAgentStatus(agentData.online);\n              setAgentEnable(agentData.enable);\n              setComissionDollars(agentData.commissionDollars);\n              setComissionSoles(agentData.commissionSoles);\n              setAgentColor(agentData.online ? 'green' : 'red');\n              setAgentBtnName(agentData.online ? 'en l√≠nea' : 'Desconectado');\n              console.log(agentStatus, 'online');\n              setState(_data);\n              d1 = _data;\n              console.log(d1, 'jshdfjh');\n              setTransactionCount(d1.length);\n              setTotalComm(_comm.dollar);\n              setTotalCommSoles(_comm.soles);\n              setLoading(false);\n              _context4.next = 73;\n              break;\n\n            case 66:\n              _context4.prev = 66;\n              _context4.t1 = _context4[\"catch\"](32);\n              console.log(_context4.t1);\n              setAlert('Algo sali√≥ mal', 'danger');\n              res = Cookies.remove('adminToken');\n              res2 = Cookies.remove('agentToken');\n              window.location.href = '/admin_login';\n\n            case 73:\n              _context4.next = 76;\n              break;\n\n            case 75:\n              window.location.href = '/admin_login';\n\n            case 76:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[2, 26], [32, 66]]);\n    }));\n\n    return function init() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    init();\n  }, [page]);\n  useEffect(function () {\n    setWidth(window.innerWidth);\n\n    if (window.innerWidth > 480) {\n      setTopBar({\n        display: 'inherit'\n      });\n    } else {\n      setTopBar({\n        display: 'none',\n        marginTop: '30px'\n      });\n    }\n\n    window.addEventListener('resize', handleResize);\n    init();\n    window.addEventListener('beforeunload', function (ev) {\n      ev.preventDefault();\n      return '¬øEst√°s seguro de que quieres cerrar?';\n    });\n  }, []);\n\n  var handleRefresh = function handleRefresh() {\n    console.log('refresh called..');\n    init();\n  };\n\n  var setAgent = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return agentStatusChange(Cookies.get('agentToken'), agentId, !agentStatus);\n\n            case 2:\n              res = _context5.sent;\n              console.log('agent', res);\n              setAgentStatus(res.online);\n              setAgentColor(res.online ? 'green' : 'red');\n              setAgentBtnName(res.online ? 'en l√≠nea' : 'Desconectado');\n\n            case 7:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function setAgent() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleResize = function handleResize() {\n    setWidth(window.innerWidth);\n\n    if (window.innerWidth > 480) {\n      setTopBar({\n        display: 'inherit'\n      });\n    } else {\n      setTopBar({\n        display: 'none',\n        marginTop: '30px'\n      });\n    }\n  };\n\n  if (loading === true) {\n    return __jsx(\"div\", {\n      className: \"loader\"\n    }, \"Cargando...\");\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"section\", {\n    id: \"topnav-admin\",\n    className: \"page-section bg-gray pb-20 pt-70 topnav-page\",\n    style: topbar\n  }, __jsx(\"div\", {\n    className: \"relative container align-left topbar\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"ul\", {\n    className: \"nav nav-tabs tpl-tabs animate\"\n  }, __jsx(\"li\", {\n    className: \"\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-item black mt-30  align-left\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-icon\"\n  }, __jsx(\"i\", {\n    className: \"fa  fa-users fa-2x\"\n  })), __jsx(\"div\", {\n    className: \"count-number orange\"\n  }, userCount), __jsx(\"div\", {\n    className: \"count-descr\"\n  }, __jsx(\"h3\", {\n    className: \"bold mt-0 mb-0\"\n  }, \"usuarios\")))), __jsx(\"li\", {\n    className: \"\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-item black mt-30  align-left\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-icon\"\n  }, __jsx(\"i\", {\n    className: \"fa  fa-exchange fa-2x\"\n  })), __jsx(\"div\", {\n    className: \"count-number orange\"\n  }, parseFloat(totalCommSoles).toFixed(2)), __jsx(\"div\", {\n    className: \"count-descr\"\n  }, __jsx(\"h3\", {\n    className: \"bold mt-0 mb-0\"\n  }, \"cambiados S./\")))), __jsx(\"li\", {\n    className: \"active\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-item black mt-30  align-left\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-icon\"\n  }, __jsx(\"i\", {\n    className: \"fa  fa-dollar fa-2x\"\n  })), __jsx(\"div\", {\n    className: \"count-number orange\"\n  }, parseFloat(totalComm).toFixed(2)), __jsx(\"div\", {\n    className: \"count-descr\"\n  }, __jsx(\"h3\", {\n    className: \"bold mt-0 mb-0\"\n  }, \"cambiados $\")))), agentId ? __jsx(\"li\", {\n    className: \"\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-item black mt-30  align-left\"\n  }, __jsx(\"button\", {\n    onClick: setAgent,\n    className: \"btn btn-mod btn-color btn-border-w btn-medium btn-circle bold\"\n  }, agentBtnName, ' ', __jsx(\"i\", {\n    style: {\n      color: agentColor\n    },\n    className: \"fa fa-circle\"\n  })), __jsx(\"br\", null), __jsx(\"span\", {\n    className: \"text-center commission-text mt-2\"\n  }, \"Por pagar a Moni \", __jsx(\"br\", null), ' $ ', parseFloat(comissionDollars).toFixed(3), '   ', ' S./ ', parseFloat(comissionSoles).toFixed(3)), __jsx(\"br\", null))) : '', admin ? __jsx(\"li\", {\n    className: \"\"\n  }, __jsx(\"div\", {\n    className: \"alt-service-item black mt-30  align-left\"\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      setExchangeModal(!exchangeModal);\n      setEditModal(false);\n      setViewModal(false);\n      setDeleteModal(false);\n    },\n    className: \"btn btn-mod btn-color btn-border-w btn-medium btn-circle bold\"\n  }, \"Tipo de Cambio\"))) : ''))))), exchangeModal ? __jsx(ExchangeModal, {\n    setExchangeModal: setExchangeModal,\n    handleRefresh: handleRefresh\n  }) : '', viewModal ? __jsx(ViewPopup, {\n    setViewModal: setViewModal,\n    data: selected,\n    token: token || token2,\n    handleRefresh: handleRefresh\n  }) : '', editModal ? __jsx(EditPopup, {\n    setEditModal: setEditModal,\n    data: selected,\n    token: token || token2,\n    handleRefresh: handleRefresh\n  }) : '', deleteModal ? __jsx(DeletePopup, {\n    setDeleteModal: setDeleteModal,\n    data: selected,\n    token: token || token2,\n    handleRefresh: handleRefresh\n  }) : '', __jsx(\"section\", {\n    className: \"jsx-2979882152\" + \" \" + 'page-section min-section pt-20'\n  }, __jsx(\"div\", {\n    className: \"jsx-2979882152\" + \" \" + 'container min-section'\n  }, __jsx(\"div\", {\n    className: \"jsx-2979882152\" + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: \"jsx-2979882152\" + \" \" + 'col-md-12'\n  }, __jsx(\"table\", {\n    className: \"jsx-2979882152\" + \" \" + 'table table-striped'\n  }, __jsx(\"tbody\", {\n    className: \"jsx-2979882152\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-2979882152\"\n  }, __jsx(\"th\", {\n    className: \"jsx-2979882152\" + \" \" + 'hidden-xs'\n  }), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Operaci\\xF3n\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Agente\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Fecha\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Cantidad\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Resultado\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Estado\"), __jsx(\"th\", {\n    className: \"jsx-2979882152\"\n  }, \"Acci\\xF3n\")), state.map(function (operation, index) {\n    var statusClass = '';\n    var iconClass = '';\n\n    if (operation.transaction.status === 'Pago pendiente') {\n      statusClass = 'pendiente';\n      iconClass = 'fa fa-lg  fa-exclamation-triangle';\n    } else if (operation.transaction.status === 'Pago realizado') {\n      statusClass = 'cnviar comprobante';\n      iconClass = 'fa fa-lg fa-mail-forward';\n    } else if (operation.transaction.status === 'Finalizado') {\n      statusClass = 'finalizado';\n      iconClass = 'fa fa-lg fa-check-circle';\n    }\n\n    return __jsx(React.Fragment, null, __jsx(\"tr\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"td\", {\n      className: \"jsx-2979882152\" + \" \" + 'orange'\n    }, operation.profileDetails.firstName, ' ', operation.profileDetails.lastName)), __jsx(\"td\", {\n      className: \"jsx-2979882152\" + \" \" + 'hidden-xs'\n    }, operation.transaction.currencyFrom === 'Soles' ? 'S./ ' : '$ ', ' ', '=>', ' ', operation.transaction.currencyTo === 'Soles' ? 'S./ ' : '$ '), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, operation.agentName || '', \" \", __jsx(\"br\", {\n      className: \"jsx-2979882152\"\n    })), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, moment(operation.date).format('DD/MM/YYYY hh:mm')), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, operation.transaction.currencyTo === 'Soles' ? 'S./ ' : '$ ', parseFloat(operation.transaction.amountToPay).toLocaleString(undefined, {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, operation.transaction.currencyFrom === 'Soles' ? 'S./ ' : '$ ', parseFloat(operation.transaction.amountReceive).toLocaleString(undefined, {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2979882152\" + \" \" + (statusClass || \"\")\n    }, __jsx(\"i\", {\n      className: \"jsx-2979882152\" + \" \" + (iconClass || \"\")\n    }), ' ', operation.transaction.status)), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"table\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"tr\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"td\", {\n      className: \"jsx-2979882152\" + \" \" + 'pr'\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        setSelected(operation);\n        setViewModal(!viewModal);\n        setEditModal(false);\n        setDeleteModal(false);\n      },\n      className: \"jsx-2979882152\" + \" \" + 'btn'\n    }, __jsx(\"i\", {\n      className: \"jsx-2979882152\" + \" \" + 'fa fa-lg  fa-eye'\n    }))), __jsx(\"td\", {\n      className: \"jsx-2979882152\" + \" \" + 'pr'\n    }, admin || agentEnable ? __jsx(React.Fragment, null, __jsx(\"button\", {\n      onClick: function onClick() {\n        setSelected(operation);\n        setEditModal(!editModal);\n        setViewModal(false);\n        setDeleteModal(false);\n      },\n      className: \"jsx-2979882152\" + \" \" + 'btn'\n    }, __jsx(\"i\", {\n      className: \"jsx-2979882152\" + \" \" + 'fa fa-lg  fa-edit'\n    }))) : ''), __jsx(\"td\", {\n      className: \"jsx-2979882152\"\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        setSelected(operation);\n        setDeleteModal(!deleteModal);\n        setViewModal(false);\n        setEditModal(false);\n      },\n      className: \"jsx-2979882152\" + \" \" + 'btn'\n    }, __jsx(\"i\", {\n      className: \"jsx-2979882152\" + \" \" + 'fa fa-lg fa-trash-o'\n    }))))))));\n  }))), __jsx(\"div\", {\n    className: \"jsx-2979882152\" + \" \" + 'pagination'\n  }, __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      page > 1 ? setPage(page - 1) : setPage(page);\n    },\n    className: \"jsx-2979882152\"\n  }, __jsx(\"i\", {\n    className: \"jsx-2979882152\" + \" \" + 'fa fa-angle-left'\n  })), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page);\n    },\n    className: \"jsx-2979882152\" + \" \" + 'active'\n  }, page), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 1);\n    },\n    className: \"jsx-2979882152\"\n  }, page + 1), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 2);\n    },\n    className: \"jsx-2979882152\"\n  }, page + 2), __jsx(\"a\", {\n    className: \"jsx-2979882152\" + \" \" + 'no-active'\n  }, \"...\"), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 1);\n    },\n    className: \"jsx-2979882152\"\n  }, __jsx(\"i\", {\n    className: \"jsx-2979882152\" + \" \" + 'fa fa-angle-right'\n  })))))), __jsx(_JSXStyle, {\n    id: \"2979882152\"\n  }, [\".min-section.jsx-2979882152{background:white;background-image:url('../images/bkg-neutro.jpg') !important;background-attachment:fixed;background-repeat:no-repeat;background-size:cover;}\", \".btn.jsx-2979882152{background:white;margin:0px;padding:0px;}\", \".min-section.jsx-2979882152{max-height:900vh;min-height:80vh;overflow:auto;white-space:nowrap;}\", \".page-section.jsx-2979882152{max-height:100vh;}\", \"h6.jsx-2979882152{margin-bottom:0.2em !important;}\", \"@media screen and (max-width:600px){.topbar.jsx-2979882152{display:none !important;}.topnav-page.jsx-2979882152{display:none !important;}#topnav-admin.jsx-2979882152{display:none !important;}.min-section.jsx-2979882152{margin-top:40px;}}\", \".commission-text.jsx-2979882152{padding:0px;margin:0px;}\"])));\n};\n\nexport default dashboard;\n\nvar changeStatus = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(token, id, amountReceive, amountToPay, currencyTo, currencyFrom, status) {\n    var body, header, res;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            body = {\n              transaction: {\n                amountReceive: amountReceive,\n                amountToPay: amountToPay,\n                currencyTo: currencyTo,\n                currencyFrom: currencyFrom,\n                status: status\n              }\n            };\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context6.next = 4;\n            return Axios.put('https://api.moni.pe/api/operations/' + id, body, header);\n\n          case 4:\n            res = _context6.sent;\n            return _context6.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function changeStatus(_x6, _x7, _x8, _x9, _x10, _x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar get_all_transactions = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(token, page, limit) {\n    var body, header, res;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            body = {};\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context7.next = 4;\n            return Axios.get('https://api.moni.pe/api/operations' + '?page=' + page + '&limit=' + limit, header);\n\n          case 4:\n            res = _context7.sent;\n            return _context7.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function get_all_transactions(_x13, _x14, _x15) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nvar get_agent_transactions = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(token, id, page, limit) {\n    var body, header, res;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            body = {};\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context8.next = 4;\n            return Axios.get('https://api.moni.pe/api/operations/agent/' + id + '?page=' + page + '&limit=' + limit, header);\n\n          case 4:\n            res = _context8.sent;\n            return _context8.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function get_agent_transactions(_x16, _x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nvar get_admin_commission = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(token) {\n    var body, header, res;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            body = {};\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context9.next = 4;\n            return Axios.get('https://api.moni.pe/api/operations/commission/admin', header);\n\n          case 4:\n            res = _context9.sent;\n            return _context9.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function get_admin_commission(_x20) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar get_agent_commission = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(token, id) {\n    var body, header, res;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            body = {};\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context10.next = 4;\n            return Axios.get('https://api.moni.pe/api/operations/commission/agent/' + id, header);\n\n          case 4:\n            res = _context10.sent;\n            return _context10.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n\n  return function get_agent_commission(_x21, _x22) {\n    return _ref10.apply(this, arguments);\n  };\n}();\n\nvar notification = function notification() {\n  var publicVapidKey = 'BBzxUnsSFfJls1TkK3_3EPsOrN3iI05ZjUvB8fc03Vezvh2Bo39c3oV-sT0_x-bYCEgPAMgvbeLqrDgHTxYsCAA'; // Check for service worker\n\n  if ('serviceWorker' in navigator) {\n    send()[\"catch\"](function (err) {\n      return console.error(err);\n    });\n  } // Register SW, Register Push, Send Push\n\n\n  function send() {\n    return _send.apply(this, arguments);\n  }\n\n  function _send() {\n    _send = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n      var register, subscription;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              // Register Service Worker\n              console.log('Registering service worker...');\n              _context11.next = 3;\n              return navigator.serviceWorker.register('/sw.js', {\n                scope: '/'\n              });\n\n            case 3:\n              register = _context11.sent;\n              console.log('Service Worker Registered...'); // Register Push\n\n              console.log('Registering Push...');\n              _context11.next = 8;\n              return register.pushManager.subscribe({\n                userVisibleOnly: true,\n                applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n              });\n\n            case 8:\n              subscription = _context11.sent;\n              console.log('Push Registered...', subscription); // Send Push Notification\n\n              console.log('Sending Push...');\n              _context11.next = 13;\n              return fetch('http://localhost:5000/api/notifications/subscribe', {\n                method: 'POST',\n                body: JSON.stringify(subscription),\n                headers: {\n                  'content-type': 'application/json'\n                }\n              });\n\n            case 13:\n              console.log('Push Sent...');\n\n            case 14:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n    return _send.apply(this, arguments);\n  }\n\n  function urlBase64ToUint8Array(base64String) {\n    var padding = '='.repeat((4 - base64String.length % 4) % 4);\n    var base64 = (base64String + padding).replace(/\\-/g, '+').replace(/_/g, '/');\n    var rawData = window.atob(base64);\n    var outputArray = new Uint8Array(rawData.length);\n\n    for (var i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i);\n    }\n\n    return outputArray;\n  }\n};","map":null,"metadata":{},"sourceType":"module"}
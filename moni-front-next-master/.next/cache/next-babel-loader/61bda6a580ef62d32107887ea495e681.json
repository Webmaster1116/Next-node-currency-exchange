{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport statusChangeMail from '../genericFunctions/statusChangeMail';\n\nconst EditPopup = props => {\n  const {\n    0: margintop,\n    1: setMargintop\n  } = useState(`${window.scrollY + 30}px`);\n  const {\n    0: agentTransactionNumber,\n    1: setAgentTransactionNumber\n  } = useState('');\n  const {\n    0: status,\n    1: setStatus\n  } = useState('Finalizado');\n  const {\n    0: showImg,\n    1: setShowImg\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: statusFinal,\n    1: setStatusFinal\n  } = useState(props.data.transaction.status === 'Finalizado' ? true : false);\n\n  const listenScrollEvent = e => {\n    if (window.scrollY > 50) {\n      setMargintop(`${window.scrollY + 50}px`);\n    } else {\n      setMargintop(`${window.scrollY + 50}px`);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', listenScrollEvent);\n  }, []);\n\n  const handleChange = async e => {\n    e.preventDefault();\n    setLoading(true);\n    await changeStatus(props.token, props.data._id, props.data.transaction, status, agentTransactionNumber, props.data.profileDetails.email, props.data.agentEmail);\n    await props.handleRefresh();\n    setLoading(false);\n    props.setEditModal(false);\n  };\n\n  const handleViewImage = async e => {\n    setShowImg(true);\n  };\n\n  if (loading === true) {\n    return (// <div className=\"page-loader\">\n      __jsx(\"div\", {\n        className: \"loader\"\n      }, \"Cargando...\") // </div>\n\n    );\n  }\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'div-custom shadow-custom round container'\n  }, showImg ? __jsx(React.Fragment, null, __jsx(\"button\", {\n    onClick: e => {\n      setShowImg(false);\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'btn btn-custom'\n  }, __jsx(\"i\", {\n    style: {\n      position: 'absolute',\n      right: '5%',\n      top: '5%'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'fa fa-times'\n  })), __jsx(\"img\", {\n    src: 'https://api.moni.pe/api/operations/photo/' + props.data._id,\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  })) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"button\", {\n    onClick: e => {\n      props.setEditModal(false);\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'btn btn-custom'\n  }, __jsx(\"i\", {\n    style: {\n      position: 'absolute',\n      right: '5%'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'fa fa-times'\n  }))), __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'orange'\n  }, \"Estado de la transaccion: \", props.data.transaction.status), __jsx(\"br\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + ''\n  }, props.data.transaction.currencyFrom === 'Dollars' ? 'USD' : props.data.transaction.currencyFrom, '-', props.data.transaction.currencyTo === 'Dollars' ? 'USD' : props.data.transaction.currencyTo)), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-1'\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-5'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: 'start'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"El dinero lo recibes en\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Numero de cuenta bancaria\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Monto\"), props.data.transactionNumber.length > 6 ? __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Numero de Operacion\") : __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Screenshoot\")))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-1 text-center'\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-5'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: 'start'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.agentBank.bankName || '-'), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.agentBank.accountNumber || '-'), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, parseFloat(props.data.transaction.amountToPay).toLocaleString(undefined, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }) || '-'), props.data.transactionNumber.length >= 6 ? __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.transactionNumber || '-') : __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"button\", {\n    onClick: e => handleViewImage(e),\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'btn btn-img'\n  }, \"Ver imagen\")))))), __jsx(\"h4\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center bold'\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Despues de verificar que el cliente a despositado\"), __jsx(\"br\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }), __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"en tu cuenta debes enviar el dinero al cliente\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-1'\n  }), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-5'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: 'start'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"El dinero lo recibes en\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Numero de cuenta bancaria\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Monto\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \"Numero de Operacion\")))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-1 text-center'\n  }, __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\"), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, \":\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'col-md-5'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: 'start'\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, __jsx(\"span\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.bankDetails.bankName || '-'), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.bankDetails.accountNumber || '-'), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, props.data.transaction.amountReceive.toLocaleString(undefined, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }) || '-'), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]])\n  }, statusFinal ? props.data.transaction.agentTransactionNumber || '-' : __jsx(\"input\", {\n    placeholder: \"XXXX\",\n    value: agentTransactionNumber,\n    onChange: e => {\n      setAgentTransactionNumber(e.target.value);\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'input-cust'\n  })))))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"button\", {\n    style: {\n      visibility: agentTransactionNumber.length >= 6 ? 'inherit' : 'hidden'\n    },\n    onClick: e => {\n      e.preventDefault();\n      setLoading(true);\n      handleChange(e);\n    },\n    className: _JSXStyle.dynamic([[\"4013620617\", [margintop]]]) + \" \" + 'mt-2 btn btn-mod btn-border-w btn-medium btn-circle bold'\n  }, \"Ya envie el dinero\"))), __jsx(_JSXStyle, {\n    id: \"4013620617\",\n    dynamic: [margintop]\n  }, [`.div-custom.__jsx-style-dynamic-selector{max-width:650px;position:absolute;top:${margintop};z-index:9999999999 !important;left:40%;background:white;padding:3em;margin-left:-150px;}`, \"p.__jsx-style-dynamic-selector{margin:2px;}\", \".mr-4.__jsx-style-dynamic-selector{margin-right:5px;}\", \".pt-0.__jsx-style-dynamic-selector{padding-top:6px !important;padding-bottom:5px !important;}\", \".mt-2.__jsx-style-dynamic-selector{margin-top:3em;}\", \".shadow-custom.__jsx-style-dynamic-selector{box-shadow:1px 1px 4px rgba(0,0,0,0.12) !important;border-radius:25px !important;}\", \".input-cust.__jsx-style-dynamic-selector{border:none;border-bottom:solid;border-width:1px;}\", \".btn-custom.__jsx-style-dynamic-selector{background:transparent;}\", \".btn-img.__jsx-style-dynamic-selector{background:transparent;margin:0px;padding:0px;}\", \"span.__jsx-style-dynamic-selector{margin:2px;}\", \"p.__jsx-style-dynamic-selector,span.__jsx-style-dynamic-selector{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}\"]));\n};\n\nconst changeStatus = async (token, id, transaction, status, agentTransactionNumber, email, agentEmail) => {\n  const {\n    amountReceive,\n    amountToPay,\n    currencyTo,\n    currencyFrom\n  } = transaction;\n  const body = {\n    transaction: _objectSpread(_objectSpread({}, transaction), {}, {\n      status,\n      agentTransactionNumber\n    }),\n    agentTransactionNumber\n  };\n  console.log('change....', body, id);\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const res = await Axios.put('https://api.moni.pe/api/operations/' + id, body, header);\n  await statusChangeMail(token, 'success', email, agentEmail, id);\n  console.log(res);\n  return res.data;\n};\n\nexport default EditPopup;","map":null,"metadata":{},"sourceType":"module"}
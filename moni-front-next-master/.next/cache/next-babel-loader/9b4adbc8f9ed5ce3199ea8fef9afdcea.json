{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport BankList from '../../Data/BankList';\nimport Axios from 'axios';\nimport getAgentAccounts from '../genericFunctions/getAgentAccounts';\n\nvar changeBankAvail = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token, id, avail) {\n    var header, status, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            }; // console.log(id);\n\n            status = avail ? 'false' : 'true'; // console.log();\n\n            _context.next = 4;\n            return Axios.get('https://api.moni.pe/api/agentaccounts/balance/' + status + '/' + id, header);\n\n          case 4:\n            res = _context.sent;\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function changeBankAvail(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar ViewBankPopup = function ViewBankPopup(props) {\n  var _useState = useState(\"\".concat(window.scrollY + 30, \"px\")),\n      margintop = _useState[0],\n      setMargintop = _useState[1];\n\n  var _useState2 = useState([]),\n      banks = _useState2[0],\n      setBanks = _useState2[1];\n\n  var _useState3 = useState([]),\n      solBanks = _useState3[0],\n      setSolBanks = _useState3[1];\n\n  var _useState4 = useState([]),\n      dolBanks = _useState4[0],\n      setDolBanks = _useState4[1];\n\n  var listenScrollEvent = function listenScrollEvent(e) {\n    // console.log(window.scrollY);\n    if (window.scrollY > 50) {\n      setMargintop(\"\".concat(window.scrollY + 50, \"px\"));\n    } else {\n      setMargintop(\"\".concat(window.scrollY + 50, \"px\"));\n    }\n  };\n\n  useEffect(function () {\n    window.addEventListener('scroll', listenScrollEvent);\n    init();\n  }, []);\n\n  var init = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res, finalBank, propBank, finalBankSol, finalBankDol;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getAgentAccounts(props.token, props.id);\n\n            case 2:\n              res = _context2.sent;\n              finalBank = [];\n              propBank = res;\n              finalBankSol = [];\n              finalBankDol = [];\n              _context2.next = 9;\n              return BankList.map(function (bank) {\n                var found = false;\n\n                for (var i = 0; i < propBank.length; i++) {\n                  if (bank.name === propBank[i].bankName && propBank[i].currency === 'Soles') {\n                    // console.log(\"bank name\", bank);\n                    finalBankSol.push({\n                      name: propBank[i].bankName,\n                      value: propBank[i].balance,\n                      type: propBank[i].currency,\n                      id: propBank[i]._id\n                    });\n                    found = true;\n                  }\n                }\n\n                if (found === false) {\n                  finalBankSol.push({\n                    name: bank.name,\n                    value: false,\n                    type: false\n                  });\n                }\n              });\n\n            case 9:\n              _context2.next = 11;\n              return BankList.map(function (bank) {\n                var found = false;\n\n                for (var i = 0; i < propBank.length; i++) {\n                  if (bank.name === propBank[i].bankName && propBank[i].currency == 'Dollars') {\n                    // console.log(\"bank name\", bank);\n                    finalBankDol.push({\n                      name: propBank[i].bankName,\n                      value: propBank[i].balance,\n                      type: propBank[i].currency,\n                      id: propBank[i]._id\n                    });\n                    found = true;\n                  }\n                }\n\n                if (found === false) {\n                  finalBankDol.push({\n                    name: bank.name,\n                    value: false,\n                    type: false\n                  });\n                }\n              });\n\n            case 11:\n              setBanks(finalBank);\n              setDolBanks(finalBankDol);\n              setSolBanks(finalBankSol);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function init() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, id, value) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault(); // console.log(id);\n\n              _context3.next = 3;\n              return changeBankAvail(props.token, id, value);\n\n            case 3:\n              _context3.next = 5;\n              return init();\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleChange(_x4, _x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'div-custom shadow-custom round container'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return props.setAvailBalanceOn(false);\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'btn btn-custom'\n  }, __jsx(\"i\", {\n    style: {\n      position: 'absolute',\n      right: '5%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'fa fa-times'\n  }))), __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'text-center bold'\n  }, \"Cuentas Bancarias\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'row flex'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-1'\n  }), __jsx(\"div\", {\n    style: {\n      paddingLeft: '40px',\n      \"float\": 'left',\n      width: '50%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-5'\n  }, __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'bold'\n  }, \"Soles\"), solBanks.map(function (bank, index) {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      disabled: bank.type === 'Soles' ? false : true,\n      checked: bank.value && bank.type === 'Soles',\n      onChange: function onChange(e) {\n        return handleChange(e, bank.id, bank.value);\n      },\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }), ' ', __jsx(\"span\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + ((bank.type === 'Soles' ? 'bold' : '') || \"\")\n    }, bank.name)));\n  })), __jsx(\"div\", {\n    style: {\n      paddingLeft: '40px',\n      \"float\": 'right',\n      width: '50%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-5'\n  }, __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'bold'\n  }, \"Dolares\"), dolBanks.map(function (bank, index) {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      disabled: bank.type === 'Dollars' ? false : true,\n      checked: bank.value && bank.type === 'Dollars',\n      onChange: function onChange(e) {\n        return handleChange(e, bank.id, bank.value);\n      },\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }), ' ', __jsx(\"span\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + ((bank.type === 'Dollars' ? 'bold' : '') || \"\")\n    }, bank.name, ' ')));\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return props.setAvailBalanceOn(false);\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'mt-2 btn btn-mod btn-border-w btn-medium btn-circle bold'\n  }, \"Cancelar\")), __jsx(_JSXStyle, {\n    id: \"1701138442\",\n    dynamic: [margintop]\n  }, [\".div-custom.__jsx-style-dynamic-selector{max-width:800px;position:absolute;top:\".concat(margintop, \";z-index:9999;left:40%;background:white;padding:3em;margin-left:-150px;}\"), \"p.__jsx-style-dynamic-selector{margin:2px;}\", \".mr-4.__jsx-style-dynamic-selector{margin-right:5px;}\", \".pt-0.__jsx-style-dynamic-selector{padding-top:6px !important;padding-bottom:5px !important;}\", \".mt-2.__jsx-style-dynamic-selector{margin-top:3em;}\", \".shadow-custom.__jsx-style-dynamic-selector{box-shadow:1px 1px 4px rgba(0,0,0,0.12) !important;border-radius:25px !important;}\", \".btn-custom.__jsx-style-dynamic-selector{background:transparent;}\"]));\n};\n\nexport default ViewBankPopup;","map":null,"metadata":{},"sourceType":"module"}
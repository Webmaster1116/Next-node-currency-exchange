{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router';\nimport Register from '../../pages/agent_register';\nimport ViewBankPopup from './viewBankPopup';\nimport Axios from 'axios';\nimport Cookies from 'js-cookie';\n\nconst getData = async (token, url) => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const data = await Axios.get(url, header);\n  return data.data;\n};\n\nconst agentStatusChange = async (token, id, status) => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const stat = status ? 'online' : 'offline';\n  const url = 'https://api.moni.pe/api/agent/' + stat + '/' + id;\n  console.log(url);\n  const data = await Axios.get(url, header);\n  return data.data;\n};\n\nconst Navbar2 = ({\n  router\n}) => {\n  const {\n    0: login,\n    1: setLogin\n  } = useState('None');\n  const {\n    0: name,\n    1: setName\n  } = useState('');\n  const {\n    0: agentId,\n    1: setAgentId\n  } = useState('');\n  const {\n    0: registerOn,\n    1: setRegisterOn\n  } = useState(false);\n  const {\n    0: availBalanceOn,\n    1: setAvailBalanceOn\n  } = useState(false);\n\n  const init = async () => {\n    const token = Cookies.get('adminToken');\n    const token2 = Cookies.get('agentToken');\n\n    if (token !== undefined || token2 !== undefined) {\n      if (token2 === undefined) {\n        try {\n          let url = 'https://api.moni.pe/api/admin/auth';\n          const data = await getData(coo, url);\n          console.log('name', data.name);\n          setName('Admin');\n          setLogin('Admin');\n        } catch (error) {\n          setLogin('None');\n        }\n      } else {\n        try {\n          let url = 'https://api.moni.pe/api/agent/auth';\n          const data = await getData(token2, url);\n          console.log('name', data.name);\n          setName(data.name);\n          const agentid = data._id;\n          setAgentId(agentid);\n          setLogin('Agent');\n        } catch (error) {\n          setLogin('None');\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleLogout = async e => {\n    e.preventDefault();\n\n    if (Cookies.get('agentToken') !== undefined) {\n      const res5 = await agentStatusChange(Cookies.get('agentToken'), agentId, false);\n      console.log('agent', res5);\n    }\n\n    const res = Cookies.remove('adminToken');\n    const res1 = Cookies.remove('agentToken');\n    console.log('logout', res);\n\n    if (router.pathname === '/' || router.pathname === '/index') {\n      window.location.reload();\n    } else {\n      window.location.href = '/';\n    }\n  };\n\n  return __jsx(React.Fragment, null, registerOn ? __jsx(Register, {\n    setRegisterOn: setRegisterOn\n  }) : '', availBalanceOn ? __jsx(ViewBankPopup, {\n    setAvailBalanceOn: setAvailBalanceOn,\n    token: Cookies.get('agentToken'),\n    id: agentId\n  }) : '', __jsx(\"nav\", {\n    className: \"jsx-241754785\" + \" \" + 'main-nav dark stick-fixed'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'container relative clearfix'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'nav-logo-wrap local-scroll'\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/';\n    },\n    className: \"jsx-241754785\" + \" \" + 'logo'\n  }, __jsx(\"img\", {\n    src: \"../images/logo-moni.png\",\n    alt: \"logo\",\n    className: \"jsx-241754785\"\n  })))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'mobile-nav'\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'fm-button'\n  }, __jsx(\"span\", {\n    className: \"jsx-241754785\"\n  }), \"Menu\"), __jsx(\"div\", {\n    id: \"fullscreen-menu\",\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper-sub'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper-sub-sub'\n  }, __jsx(\"ul\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-menu-links scroll-nav local-scroll'\n  }, __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      setAvailBalanceOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Disponibilidad de dinero\"))), __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'none'\n    } : {\n      display: 'block'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/agents';\n    },\n    className: \"jsx-241754785\"\n  }, \"Agentes disponibles\"))), __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'none'\n    } : {\n      display: 'block'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      setRegisterOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Agregar Agente\"))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/admin/admin_dashboard';\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'Panel de agentes' : 'PANEL DE ADMINISTRACIÓN'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'mn-has-sub'\n  }, name || '')), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? '' : __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/admin/users';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Usuarios\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      login === 'Agent' ? window.location.href = '/agents/invoice' : window.location.href = '/admin/invoice';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Facturas\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: handleLogout,\n    href: \"\",\n    className: \"jsx-241754785\"\n  }, \"Cerrar sesi\\xF3n\"))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-social-links'\n  }, __jsx(\"a\", {\n    href: \"#\",\n    title: \"Facebook\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-facebook'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Twitter\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-twitter'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Linkedin\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-linkedin'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Instagram+\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-instagram'\n  }))))))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'inner-nav desktop-nav'\n  }, __jsx(\"ul\", {\n    className: \"jsx-241754785\" + \" \" + 'clearlist scroll-nav local-scroll'\n  }, __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      setAvailBalanceOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Disponibilidad de dinero\"))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      {\n        login === 'Agent' ? window.location.href = '/agents/profile' : window.location.href = '/agents/viewagents';\n      }\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'datos de perfil' : 'Agentes disponibles'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      {\n        login === 'Agent' ? window.location.href = '/agents/bank' : setRegisterOn(true);\n      }\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'cuentas bancarias' : 'Agregar Agente'))), __jsx(\"li\", {\n    className: \"jsx-241754785\" + \" \" + 'active'\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/admin/admin_dashboard';\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'Panel de agentes' : 'PANEL DE ADMINISTRACIÓN'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'mn-has-sub'\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-user fa-2x'\n  }), \" \", name, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-angle-down fa-2x'\n  })), __jsx(\"ul\", {\n    style: {\n      display: 'none'\n    },\n    className: \"jsx-241754785\" + \" \" + 'mn-sub'\n  }, __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? '' : __jsx(\"a\", {\n    onClick: () => {\n      window.location.href = '/admin/users';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Usuarios\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: () => {\n      login === 'Agent' ? window.location.href = '/agents/invoice' : window.location.href = '/admin/invoice';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Facturas\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: handleLogout,\n    href: \"\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-sign-out fa-2x'\n  }), \" Cerrar sesi\\xF3n\"))))))), __jsx(_JSXStyle, {\n    id: \"241754785\"\n  }, [\".btn.jsx-241754785{background:transparent;}\"])));\n};\n\nexport default withRouter(Navbar2);","map":null,"metadata":{},"sourceType":"module"}
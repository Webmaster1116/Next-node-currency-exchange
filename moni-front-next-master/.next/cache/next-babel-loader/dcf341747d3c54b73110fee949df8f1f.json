{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router, { withRouter } from 'next/router';\nimport Register from '../../pages/agent_register';\nimport ViewBankPopup from './viewBankPopup';\nimport Axios from 'axios';\nimport Cookies from 'js-cookie';\n\nvar getData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token, url) {\n    var header, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context.next = 3;\n            return Axios.get(url, header);\n\n          case 3:\n            data = _context.sent;\n            return _context.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getData(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar agentStatusChange = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token, id, status) {\n    var header, stat, url, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            stat = status ? 'online' : 'offline';\n            url = 'https://api.moni.pe/api/agent/' + stat + '/' + id;\n            _context2.next = 5;\n            return Axios.get(url, header);\n\n          case 5:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", data.data);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function agentStatusChange(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar Navbar2 = function Navbar2(_ref3) {\n  var router = _ref3.router;\n\n  var _useState = useState('None'),\n      login = _useState[0],\n      setLogin = _useState[1];\n\n  var _useState2 = useState(''),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      agentId = _useState3[0],\n      setAgentId = _useState3[1];\n\n  var _useState4 = useState(false),\n      registerOn = _useState4[0],\n      setRegisterOn = _useState4[1];\n\n  var _useState5 = useState(false),\n      availBalanceOn = _useState5[0],\n      setAvailBalanceOn = _useState5[1];\n\n  var init = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var token, token2, url, data, _url, _data, agentid;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              token = Cookies.get('adminToken');\n              token2 = Cookies.get('agentToken');\n\n              if (!(token !== undefined || token2 !== undefined)) {\n                _context3.next = 32;\n                break;\n              }\n\n              if (!(token2 === undefined)) {\n                _context3.next = 18;\n                break;\n              }\n\n              _context3.prev = 4;\n              url = 'https://api.moni.pe/api/admin/auth';\n              _context3.next = 8;\n              return getData(coo, url);\n\n            case 8:\n              data = _context3.sent;\n              setName('Admin');\n              setLogin('Admin');\n              _context3.next = 16;\n              break;\n\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](4);\n              setLogin('None');\n\n            case 16:\n              _context3.next = 32;\n              break;\n\n            case 18:\n              _context3.prev = 18;\n              _url = 'https://api.moni.pe/api/agent/auth';\n              _context3.next = 22;\n              return getData(token2, _url);\n\n            case 22:\n              _data = _context3.sent;\n              setName(_data.name);\n              agentid = _data._id;\n              setAgentId(agentid);\n              setLogin('Agent');\n              _context3.next = 32;\n              break;\n\n            case 29:\n              _context3.prev = 29;\n              _context3.t1 = _context3[\"catch\"](18);\n              setLogin('None');\n\n            case 32:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[4, 13], [18, 29]]);\n    }));\n\n    return function init() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    init();\n  }, []);\n\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var res5, res, res1;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!(Cookies.get('agentToken') !== undefined)) {\n                _context4.next = 5;\n                break;\n              }\n\n              _context4.next = 4;\n              return agentStatusChange(Cookies.get('agentToken'), agentId, false);\n\n            case 4:\n              res5 = _context4.sent;\n\n            case 5:\n              res = Cookies.remove('adminToken');\n              res1 = Cookies.remove('agentToken');\n\n              if (router.pathname === '/' || router.pathname === '/index') {\n                window.location.reload();\n              } else {\n                window.location.href = '/';\n              }\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleLogout(_x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, registerOn ? __jsx(Register, {\n    setRegisterOn: setRegisterOn\n  }) : '', availBalanceOn ? __jsx(ViewBankPopup, {\n    setAvailBalanceOn: setAvailBalanceOn,\n    token: Cookies.get('agentToken'),\n    id: agentId\n  }) : '', __jsx(\"nav\", {\n    className: \"jsx-241754785\" + \" \" + 'main-nav dark stick-fixed'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'container relative clearfix'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'nav-logo-wrap local-scroll'\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/';\n    },\n    className: \"jsx-241754785\" + \" \" + 'logo'\n  }, __jsx(\"img\", {\n    src: \"../images/logo-moni.png\",\n    alt: \"logo\",\n    className: \"jsx-241754785\"\n  })))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'mobile-nav'\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'fm-button'\n  }, __jsx(\"span\", {\n    className: \"jsx-241754785\"\n  }), \"Menu\"), __jsx(\"div\", {\n    id: \"fullscreen-menu\",\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper-sub'\n  }, __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-wrapper-sub-sub'\n  }, __jsx(\"ul\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-menu-links scroll-nav local-scroll'\n  }, __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      setAvailBalanceOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Disponibilidad de dinero\"))), __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'none'\n    } : {\n      display: 'block'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/agents';\n    },\n    className: \"jsx-241754785\"\n  }, \"Agentes disponibles\"))), __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'none'\n    } : {\n      display: 'block'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      setRegisterOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Agregar Agente\"))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/admin/admin_dashboard';\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'Panel de agentes' : 'PANEL DE ADMINISTRACIÓN'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'mn-has-sub'\n  }, name || '')), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? '' : __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/admin/users';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Usuarios\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      login === 'Agent' ? window.location.href = '/agents/invoice' : window.location.href = '/admin/invoice';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Facturas\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: handleLogout,\n    href: \"\",\n    className: \"jsx-241754785\"\n  }, \"Cerrar sesi\\xF3n\"))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'fm-social-links'\n  }, __jsx(\"a\", {\n    href: \"#\",\n    title: \"Facebook\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-facebook'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Twitter\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-twitter'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Linkedin\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-linkedin'\n  })), __jsx(\"a\", {\n    href: \"#\",\n    title: \"Instagram+\",\n    target: \"_blank\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-instagram'\n  }))))))), __jsx(\"div\", {\n    className: \"jsx-241754785\" + \" \" + 'inner-nav desktop-nav'\n  }, __jsx(\"ul\", {\n    className: \"jsx-241754785\" + \" \" + 'clearlist scroll-nav local-scroll'\n  }, __jsx(\"li\", {\n    style: login === 'Agent' ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      setAvailBalanceOn(true);\n    },\n    className: \"jsx-241754785\"\n  }, \"Disponibilidad de dinero\"))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      {\n        login === 'Agent' ? window.location.href = '/agents/profile' : window.location.href = '/agents/viewagents';\n      }\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'datos de perfil' : 'Agentes disponibles'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      {\n        login === 'Agent' ? window.location.href = '/agents/bank' : setRegisterOn(true);\n      }\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'cuentas bancarias' : 'Agregar Agente'))), __jsx(\"li\", {\n    className: \"jsx-241754785\" + \" \" + 'active'\n  }, __jsx(Link, {\n    href: \"\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/admin/admin_dashboard';\n    },\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? 'Panel de agentes' : 'PANEL DE ADMINISTRACIÓN'))), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-241754785\" + \" \" + 'mn-has-sub'\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-user fa-2x'\n  }), \" \", name, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-angle-down fa-2x'\n  })), __jsx(\"ul\", {\n    style: {\n      display: 'none'\n    },\n    className: \"jsx-241754785\" + \" \" + 'mn-sub'\n  }, __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, login === 'Agent' ? '' : __jsx(\"a\", {\n    onClick: function onClick() {\n      window.location.href = '/admin/users';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Usuarios\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      login === 'Agent' ? window.location.href = '/agents/invoice' : window.location.href = '/admin/invoice';\n    },\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-file-invoice fa-2x'\n  }, \" \"), \"Facturas\")), __jsx(\"li\", {\n    className: \"jsx-241754785\"\n  }, __jsx(\"a\", {\n    onClick: handleLogout,\n    href: \"\",\n    className: \"jsx-241754785\"\n  }, __jsx(\"i\", {\n    className: \"jsx-241754785\" + \" \" + 'fa fa-sign-out fa-2x'\n  }), \" Cerrar sesi\\xF3n\"))))))), __jsx(_JSXStyle, {\n    id: \"241754785\"\n  }, [\".btn.jsx-241754785{background:transparent;}\"])));\n};\n\nexport default withRouter(Navbar2);","map":null,"metadata":{},"sourceType":"module"}
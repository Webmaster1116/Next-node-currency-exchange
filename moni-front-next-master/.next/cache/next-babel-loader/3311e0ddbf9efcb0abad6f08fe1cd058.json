{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport BankList from '../../Data/BankList';\nimport Axios from 'axios';\nimport getAgentAccounts from '../genericFunctions/getAgentAccounts';\n\nconst changeBankAvail = async (token, id, avail) => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  console.log(id);\n  let status = avail ? 'false' : 'true';\n  console.log();\n  const res = await Axios.get('https://api.moni.pe/api/agentaccounts/balance/' + status + '/' + id, header);\n  console.log(res.data);\n};\n\nconst ViewBankPopup = props => {\n  const {\n    0: margintop,\n    1: setMargintop\n  } = useState(`${window.scrollY + 30}px`);\n  const {\n    0: banks,\n    1: setBanks\n  } = useState([]);\n  const {\n    0: solBanks,\n    1: setSolBanks\n  } = useState([]);\n  const {\n    0: dolBanks,\n    1: setDolBanks\n  } = useState([]);\n\n  const listenScrollEvent = e => {\n    console.log(window.scrollY);\n\n    if (window.scrollY > 50) {\n      setMargintop(`${window.scrollY + 50}px`);\n    } else {\n      setMargintop(`${window.scrollY + 50}px`);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', listenScrollEvent);\n    init();\n  }, []);\n\n  const init = async () => {\n    console.log(props.id);\n    const res = await getAgentAccounts(props.token, props.id);\n    let finalBank = [];\n    const propBank = res;\n    let finalBankSol = [];\n    let finalBankDol = [];\n    await BankList.map(bank => {\n      let found = false;\n\n      for (let i = 0; i < propBank.length; i++) {\n        if (bank.name === propBank[i].bankName && propBank[i].currency === 'Soles') {\n          // console.log(\"bank name\", bank);\n          finalBankSol.push({\n            name: propBank[i].bankName,\n            value: propBank[i].balance,\n            type: propBank[i].currency,\n            id: propBank[i]._id\n          });\n          found = true;\n        }\n      }\n\n      if (found === false) {\n        finalBankSol.push({\n          name: bank.name,\n          value: false,\n          type: false\n        });\n      }\n    });\n    await BankList.map(bank => {\n      let found = false;\n\n      for (let i = 0; i < propBank.length; i++) {\n        if (bank.name === propBank[i].bankName && propBank[i].currency == 'Dollars') {\n          // console.log(\"bank name\", bank);\n          finalBankDol.push({\n            name: propBank[i].bankName,\n            value: propBank[i].balance,\n            type: propBank[i].currency,\n            id: propBank[i]._id\n          });\n          found = true;\n        }\n      }\n\n      if (found === false) {\n        finalBankDol.push({\n          name: bank.name,\n          value: false,\n          type: false\n        });\n      }\n    });\n    setBanks(finalBank);\n    setDolBanks(finalBankDol);\n    setSolBanks(finalBankSol);\n  };\n\n  const handleChange = async (e, id, value) => {\n    e.preventDefault();\n    console.log(id);\n    await changeBankAvail(props.token, id, value);\n    await init();\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'div-custom shadow-custom round container'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n  }, __jsx(\"button\", {\n    onClick: () => props.setAvailBalanceOn(false),\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'btn btn-custom'\n  }, __jsx(\"i\", {\n    style: {\n      position: 'absolute',\n      right: '5%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'fa fa-times'\n  }))), __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'text-center bold'\n  }, \"Cuentas Bancarias\")), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'row flex'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-1'\n  }), __jsx(\"div\", {\n    style: {\n      paddingLeft: '40px',\n      float: 'left',\n      width: '50%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-5'\n  }, __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'bold'\n  }, \"Soles\"), solBanks.map((bank, index) => {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      disabled: bank.type === 'Soles' ? false : true,\n      checked: bank.value && bank.type === 'Soles',\n      onChange: e => handleChange(e, bank.id, bank.value),\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }), ' ', __jsx(\"span\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + ((bank.type === 'Soles' ? 'bold' : '') || \"\")\n    }, bank.name)));\n  })), __jsx(\"div\", {\n    style: {\n      paddingLeft: '40px',\n      float: 'right',\n      width: '50%'\n    },\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'col-5'\n  }, __jsx(\"h3\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'bold'\n  }, \"Dolares\"), dolBanks.map((bank, index) => {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      disabled: bank.type === 'Dollars' ? false : true,\n      checked: bank.value && bank.type === 'Dollars',\n      onChange: e => handleChange(e, bank.id, bank.value),\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]])\n    }), ' ', __jsx(\"span\", {\n      className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + ((bank.type === 'Dollars' ? 'bold' : '') || \"\")\n    }, bank.name, ' ')));\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'text-center'\n  }, __jsx(\"button\", {\n    onClick: () => props.setAvailBalanceOn(false),\n    className: _JSXStyle.dynamic([[\"1701138442\", [margintop]]]) + \" \" + 'mt-2 btn btn-mod btn-border-w btn-medium btn-circle bold'\n  }, \"Cancelar\")), __jsx(_JSXStyle, {\n    id: \"1701138442\",\n    dynamic: [margintop]\n  }, [`.div-custom.__jsx-style-dynamic-selector{max-width:800px;position:absolute;top:${margintop};z-index:9999;left:40%;background:white;padding:3em;margin-left:-150px;}`, \"p.__jsx-style-dynamic-selector{margin:2px;}\", \".mr-4.__jsx-style-dynamic-selector{margin-right:5px;}\", \".pt-0.__jsx-style-dynamic-selector{padding-top:6px !important;padding-bottom:5px !important;}\", \".mt-2.__jsx-style-dynamic-selector{margin-top:3em;}\", \".shadow-custom.__jsx-style-dynamic-selector{box-shadow:1px 1px 4px rgba(0,0,0,0.12) !important;border-radius:25px !important;}\", \".btn-custom.__jsx-style-dynamic-selector{background:transparent;}\"]));\n};\n\nexport default ViewBankPopup;","map":null,"metadata":{},"sourceType":"module"}
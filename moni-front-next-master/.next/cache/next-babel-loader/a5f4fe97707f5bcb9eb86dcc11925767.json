{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport Axios from 'axios';\nimport BankAccountsEdit from './BankAccountsEdit';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { withRouter } from 'next/router';\n\nconst BankAccountsView = () => {\n  const {\n    0: bankName,\n    1: setBankName\n  } = useState('');\n  const {\n    0: currencyType,\n    1: setCurrencyType\n  } = useState('');\n  const {\n    0: accountType,\n    1: SetAccountType\n  } = useState('');\n  const {\n    0: accountNumber,\n    1: setAccountNumber\n  } = useState('');\n  const {\n    0: nickname,\n    1: setNickname\n  } = useState('');\n  const {\n    state,\n    addToken,\n    addName\n  } = useContext(UserContext);\n  const {\n    0: banks,\n    1: setBanks\n  } = useState('');\n  const {\n    0: showEdit,\n    1: setShowEdit\n  } = useState(false);\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert,\n    alerts\n  } = alertContext;\n  const {\n    0: data,\n    1: setData\n  } = useState('');\n  const {\n    0: editRequest,\n    1: setEditRequest\n  } = useState('');\n\n  const init = async () => {\n    try {\n      const header = {\n        headers: {\n          'x-auth-token': Cookies.get('token')\n        }\n      };\n      const res = await Axios.get('https://api.moni.pe/api/accounts/', header);\n      setBanks(res.data);\n    } catch (error) {\n      setAlert('Por favor inicie sesiÃ³n para continuar', 'danger');\n      Router.push('/login');\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleEdit = (data, request) => {\n    // console.log('da', data._id);\n    setData(data);\n    setEditRequest(request); // console.log(editRequest);\n\n    setShowEdit(!showEdit);\n    init();\n  };\n\n  if (showEdit === true) {\n    {\n      return __jsx(BankAccountsEdit, {\n        data: data,\n        handleShowEdit: handleEdit,\n        state: showEdit,\n        request: editRequest\n      });\n    }\n  }\n\n  if (banks === '') {\n    return __jsx(\"div\", {\n      className: \"form-container w-100\"\n    }, __jsx(\"h2\", null, __jsx(Loader, null)));\n  }\n\n  return __jsx(\"div\", {\n    className: \"form-container w-100\"\n  }, __jsx(\"h2\", {\n    className: \"mb-5\"\n  }, \"Detalles de cuenta bancaria\"), banks.map((data, index) => {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: \"row mt-4\"\n    }, __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"N\\xFAmero de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.accountNumber))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.type))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Nombre del banco\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.bankName))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Due\\xF1o de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.nickname || ''))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de moneda\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.currency))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"button\", {\n      className: \"mt-4 mb-0 btn blue-btn\",\n      onClick: () => handleEdit(data, 'edit')\n    }, \"Editar\")))));\n  }), __jsx(\"button\", {\n    className: \"btn outline-btn mt-5 btn-long\",\n    onClick: () => handleEdit('', 'add')\n  }, \"Agregar cuenta bancaria\"));\n};\n\nexport default BankAccountsView;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { FcRefresh } from 'react-icons/fc';\nimport { Dropdown } from 'react-bootstrap';\nimport Link from 'next/link';\nimport Axios from 'axios';\n\nvar getCompra = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Axios.get('https://api.moni.pe/api/exchange/calculate?originCurrency=USD&destinationCurrency=PEN&amount=1');\n\n          case 2:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getCompra() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getVenta = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Axios.get('https://api.moni.pe/api/exchange/calculate?originCurrency=PEN&destinationCurrency=USD&amount=1');\n\n          case 2:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getVenta() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar getBpi = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Axios.get('https://api.coindesk.com/v1/bpi/currentprice.json');\n\n          case 2:\n            res = _context3.sent;\n            return _context3.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getBpi() {\n    return _ref3.apply(this, arguments);\n  };\n}(); // import \"../../Style/Convertor.css\";\n// import \"../../Style/Button.css\";\n\n\nvar Convertor = function Convertor(props) {\n  var toAmount, fromAmount;\n\n  var _useState = useState({\n    soles: 3.5,\n    usd: 3.495,\n    savingsCompra: 0.008,\n    savingsVenta: 0.0045,\n    bpi: {\n      USD: {\n        rate_float: 9000\n      }\n    }\n  }),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(true),\n      loader = _useState2[0],\n      setLoader = _useState2[1];\n\n  var init = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var data4, data2, data3, body2;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return getCompra();\n\n            case 2:\n              data4 = _context4.sent;\n              _context4.next = 5;\n              return getVenta();\n\n            case 5:\n              data2 = _context4.sent;\n              _context4.next = 8;\n              return getBpi();\n\n            case 8:\n              data3 = _context4.sent;\n              console.log(data4, data2, data3);\n              body2 = {\n                soles: data4.rate,\n                usd: data2.rate,\n                savingsCompra: data4.ahorros,\n                savingsVenta: data2.ahorros,\n                bpi: data3.bpi\n              };\n              setData(body2);\n              fromAmount = 1;\n              toAmount = data4.rate;\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function init() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    init();\n    console.log(data, 'body');\n  }, []); // if (loader === true) {\n  //   return (\n  //     <div className=\"page-loader\">\n  //       <div className=\"loader\">Cargando...</div>\n  //     </div>\n  //   );\n  // }\n\n  console.log(data, 'dat');\n\n  var _useState3 = useState(data.soles),\n      exchangeRate = _useState3[0],\n      setExchangeRate = _useState3[1]; // data.bpi.USD.rate_float\n\n\n  var _useState4 = useState('Soles'),\n      fromCurrency = _useState4[0],\n      setFromCurrency = _useState4[1];\n\n  var _useState5 = useState('Dollars'),\n      toCurrency = _useState5[0],\n      setToCurrency = _useState5[1];\n\n  var _useState6 = useState(1500),\n      amount = _useState6[0],\n      setAmount = _useState6[1];\n\n  var _useState7 = useState(true),\n      amountInFromCurrency = _useState7[0],\n      setAmountInFromCurrency = _useState7[1];\n\n  useEffect(function () {\n    if (fromCurrency == 'Dollars' && toCurrency == 'Soles') {\n      setExchangeRate(data.soles);\n    }\n\n    if (fromCurrency == 'Dollars' && toCurrency == 'Bitcoin') {\n      setExchangeRate(1 / data.bpi.USD.rate_float);\n    }\n\n    if (fromCurrency == 'Dollars' && toCurrency == 'Dollars') {\n      setExchangeRate(1);\n    }\n\n    if (fromCurrency == 'Soles' && toCurrency == 'Soles') {\n      setExchangeRate(1);\n    }\n\n    if (fromCurrency == 'Soles' && toCurrency == 'Bitcoin') {\n      setExchangeRate(1 / data.bpi.USD.rate_float * (1 / data.soles));\n    }\n\n    if (fromCurrency == 'Soles' && toCurrency == 'Dollars') {\n      setExchangeRate(1 / data.usd);\n    }\n\n    if (fromCurrency == 'Bitcoin' && toCurrency == 'Soles') {\n      setExchangeRate(data.soles * data.bpi.USD.rate_float);\n    }\n\n    if (fromCurrency == 'Bitcoin' && toCurrency == 'Bitcoin') {\n      setExchangeRate(1);\n    }\n\n    if (fromCurrency == 'Bitcoin' && toCurrency == 'Dollars') {\n      setExchangeRate(data.bpi.USD.rate_float);\n    }\n\n    if (amountInFromCurrency) {\n      fromAmount = Math.floor(amount * 100) / 100;\n      toAmount = Math.floor(amount * exchangeRate * 100) / 100;\n    } else {\n      toAmount = Math.floor(amount * 100) / 100;\n      fromAmount = Math.floor(amount / exchangeRate * 100) / 100;\n    }\n  }, [fromCurrency, toCurrency]);\n\n  if (amountInFromCurrency) {\n    fromAmount = Math.floor(amount * 100) / 100;\n    toAmount = Math.floor(amount * exchangeRate * 100) / 100;\n  } else {\n    toAmount = Math.floor(amount * 100) / 100;\n    fromAmount = Math.floor(amount / exchangeRate * 100) / 100;\n  }\n\n  function handleFromAmountChange(e) {\n    // const re = /^[0-9\\b]+$/;\n    var re = /^[+-]?([0-9]+(\\.\\d{0,2})?|[.][0-9]+)$/;\n\n    if (e.target.value === '' || re.test(e.target.value)) {\n      setAmount(e.target.value);\n      setAmountInFromCurrency(true);\n    }\n  }\n\n  function handleToAmountChange(e) {\n    // const re = /^[0-9\\b]+$/;\n    var re = /^[+-]?([0-9]+(\\.\\d{0,2})?|[.][0-9]+)$/;\n\n    if (e.target.value === '' || re.test(e.target.value)) {\n      setAmount(e.target.value);\n      setAmountInFromCurrency(false);\n    }\n  }\n\n  var handleRedirect = function handleRedirect(e) {\n    e.preventDefault();\n    window.location.href = '/operation?originAmount=' + fromAmount + '&destinationAmount=' + toAmount + '&originCurrency=' + fromCurrency + '&destinationCurrency=' + toCurrency;\n  };\n\n  return __jsx(\"div\", {\n    className: \"col-lg-5 col-md-6 col-sm-6 col-xs-12 mb-40 wow fadeInRight\",\n    \"data-wow-delay\": \"0.5s\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'text'\n  }, __jsx(\"h5\", {\n    className: \"jsx-2248700009\" + \" \" + 'white bold uppercase mb-0 mt-xs-20'\n  }, \"Tipo de Cambio del d\\xF3lar hoy en Per\\xFA\"), __jsx(\"h6\", {\n    className: \"jsx-2248700009\" + \" \" + 'white'\n  }, \"Compra: \", __jsx(\"span\", {\n    className: \"jsx-2248700009\" + \" \" + 'bold'\n  }, data.soles), \" - Venta:\", ' ', __jsx(\"span\", {\n    className: \"jsx-2248700009\" + \" \" + 'bold'\n  }, data.usd)), __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-md-12 col-xs-12'\n  }, __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-md-7 col-xs-7 bg-white cambio-form'\n  }, __jsx(\"h5\", {\n    className: \"jsx-2248700009\" + \" \" + 'align-left mb-0 mt-0 bold uppercase'\n  }, \"Env\\xEDas\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"name\",\n    id: \"name\",\n    value: fromAmount,\n    placeholder: \"0\",\n    step: \".01\",\n    maxLength: \"100\",\n    onChange: handleFromAmountChange,\n    className: \"jsx-2248700009\" + \" \" + 'input-md form-control-cambio bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-md-3 col-xs-3 cambio-moneda white bold align-left'\n  }, fromCurrency === 'Soles' ? 'Soles' : 'Dólares'), __jsx(\"div\", {\n    onClick: function onClick(e) {\n      e.preventDefault();\n\n      if (fromCurrency === 'Soles') {\n        setFromCurrency('Dollars');\n      } else {\n        setFromCurrency('Soles');\n      }\n\n      if (toCurrency === 'Soles') {\n        setToCurrency('Dollars');\n      } else {\n        setToCurrency('Soles');\n      }\n    },\n    className: \"jsx-2248700009\" + \" \" + 'col-md-2 col-xs-2 cambio-btn'\n  }, __jsx(\"i\", {\n    className: \"jsx-2248700009\" + \" \" + 'fa fa-refresh fa-2x orange'\n  })))), __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'row mt-20'\n  }, __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-sm-12 col-xs-12'\n  }, __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-md-7 col-xs-7 bg-white cambio-form'\n  }, __jsx(\"h5\", {\n    className: \"jsx-2248700009\" + \" \" + 'align-left mb-0 mt-0 bold uppercase'\n  }, \"Recibes\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"name\",\n    id: \"name\",\n    value: toAmount,\n    placeholder: \"0\",\n    step: \".01\",\n    maxLength: \"100\",\n    onChange: handleToAmountChange,\n    className: \"jsx-2248700009\" + \" \" + 'input-md form-control-cambio bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-2248700009\" + \" \" + 'col-md-3 col-xs-3 cambio-moneda white bold align-left'\n  }, toCurrency === 'Dollars' ? 'Dólares' : 'Soles'), __jsx(\"div\", {\n    onClick: function onClick(e) {\n      e.preventDefault();\n\n      if (toCurrency === 'Soles') {\n        setToCurrency('Dollars');\n      } else {\n        setToCurrency('Soles');\n      }\n\n      if (fromCurrency === 'Soles') {\n        setFromCurrency('Dollars');\n      } else {\n        setFromCurrency('Soles');\n      }\n    },\n    className: \"jsx-2248700009\" + \" \" + 'col-md-2 col-xs-2 cambio-btn'\n  }, __jsx(\"i\", {\n    className: \"jsx-2248700009\" + \" \" + 'fa fa-refresh fa-2x orange'\n  })))), __jsx(\"h6\", {\n    className: \"jsx-2248700009\" + \" \" + 'white mt-20'\n  }, \"Ahorro Estimado: \", fromCurrency === 'Soles' ? ' $ ' : ' S/. ', fromCurrency === 'Soles' ? parseFloat(data.savingsVenta * fromAmount / data.soles).toFixed(2) : parseFloat(data.savingsCompra * fromAmount).toFixed(2)), __jsx(\"a\", {\n    onClick: handleRedirect,\n    className: \"jsx-2248700009\" + \" \" + 'btn btn-mod btn-color btn-large btn-circle'\n  }, \"Iniciar operaci\\xF3n\"), __jsx(_JSXStyle, {\n    id: \"2248700009\"\n  }, [\"input[type='number'].jsx-2248700009::-webkit-inner-spin-button,input[type='number'].jsx-2248700009::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0;}\", \"@media only screen and (max-width:480px){.cambio-moneda.jsx-2248700009{height:68px;}.cambio-btn.jsx-2248700009{height:68px;}}\"])));\n};\n\nexport default Convertor;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport TopNav from '../components/Operation/TopNav';\nimport NewOperation from '../components/Operation/NewOperation';\nimport ProfileView from '../components/Operation/ProfileView';\nimport BankAccount from '../components/Operation/BankAccountsView';\nimport OperationHistory from '../components/Operation/OperationHistory';\nimport Layout from '../components/Layout';\nimport UserContext from '../context/UserContext';\nimport Fetch from 'isomorphic-unfetch';\nimport Cookies from 'js-cookie';\nimport Router from 'next/router';\nimport Navbar from '../components/Navbar2';\nimport Loader from '../components/Loader';\nimport Head from 'next/head';\n\nvar operation = function operation(props) {\n  var _useContext = useContext(UserContext),\n      state = _useContext.state,\n      isUserAuth = _useContext.isUserAuth;\n\n  var _useState = useState(''),\n      isLogin = _useState[0],\n      setIsLogin = _useState[1];\n\n  useEffect(function () {\n    var init = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var coo;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                coo = Cookies.get('token'); // console.log('coo', coo);\n\n                if (coo != undefined) {\n                  // console.log('all set');\n                  setIsLogin(true);\n                } else {\n                  Router.push('/login');\n                }\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function init() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    init();\n  }, []);\n\n  var _useState2 = useState([__jsx(NewOperation, {\n    data: props\n  }), __jsx(ProfileView, null), __jsx(BankAccount, null), __jsx(OperationHistory, null)]),\n      view = _useState2[0],\n      setView = _useState2[1];\n\n  var _useState3 = useState(0),\n      tab = _useState3[0],\n      setTab = _useState3[1];\n\n  var handleClick = function handleClick(no) {\n    setTab(no); // console.log(no);\n    // console.log(state[tab]);\n  }; // if (isLogin === \"\") {\n  //   return (\n  //     // <div className=\"operation-view w-100 h-100\">\n  //     <Loader />\n  //     // </div>\n  //   );\n  // }\n\n\n  return __jsx(React.Fragment, null, __jsx(Layout, null, __jsx(\"div\", {\n    className: \"jsx-2886016117\" + \" \" + 'appear-animate'\n  }, __jsx(\"div\", {\n    className: \"jsx-2886016117\" + \" \" + 'appear-animate'\n  }, __jsx(TopNav, {\n    handleClick: handleClick,\n    state: view[tab]\n  }), __jsx(NewOperation, {\n    data: props\n  })), __jsx(_JSXStyle, {\n    id: \"2886016117\"\n  }, [\"div.jsx-2886016117,section.jsx-2886016117{background:white;}\"]))));\n};\n\noperation.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n  var res, res2, res3, data, data2, data3;\n  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return Fetch('https://api.coindesk.com/v1/bpi/currentprice.json');\n\n        case 2:\n          res = _context2.sent;\n          _context2.next = 5;\n          return Fetch('https://api.moni.pe/api/exchange/calculate?originCurrency=USD&destinationCurrency=PEN&amount=1');\n\n        case 5:\n          res2 = _context2.sent;\n          _context2.next = 8;\n          return Fetch('https://api.moni.pe/api/exchange/calculate?originCurrency=PEN&destinationCurrency=USD&amount=1');\n\n        case 8:\n          res3 = _context2.sent;\n          _context2.next = 11;\n          return res.json();\n\n        case 11:\n          data = _context2.sent;\n          _context2.next = 14;\n          return res2.json();\n\n        case 14:\n          data2 = _context2.sent;\n          _context2.next = 17;\n          return res3.json();\n\n        case 17:\n          data3 = _context2.sent;\n          return _context2.abrupt(\"return\", {\n            soles: data2.rate,\n            usd: data3.rate,\n            savingsCompra: data2.ahorros,\n            savingsVenta: data3.ahorros,\n            bpi: data.bpi\n          });\n\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n}));\nexport default operation;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { Table } from 'react-bootstrap';\nimport Cookies from 'js-cookie';\nimport Axios from 'axios';\nimport moment from 'moment';\nimport ViewUserPopup from './viewUserPopup';\n\nvar getUsers = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token, page, limit) {\n    var header, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            header = {\n              headers: {\n                'x-auth-token': token\n              }\n            };\n            _context.next = 3;\n            return Axios.get('https://api.moni.pe/api/profiles/all' + '?page=' + page + '&limit=' + limit, header);\n\n          case 3:\n            res = _context.sent;\n            console.log('users', res);\n            return _context.abrupt(\"return\", res.data);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getUsers(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Users = function Users(props) {\n  var _useState = useState([]),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(false),\n      userPopup = _useState2[0],\n      setUserPopup = _useState2[1];\n\n  var _useState3 = useState(''),\n      user = _useState3[0],\n      setUser = _useState3[1];\n\n  var _useState4 = useState(10),\n      limit = _useState4[0],\n      setLimit = _useState4[1];\n\n  var _useState5 = useState(1),\n      page = _useState5[0],\n      setPage = _useState5[1];\n\n  var _useState6 = useState(false),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var init = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // console.log(Cookies.get(\"adminToken\"));\n              setLoading(true);\n              _context2.next = 3;\n              return getUsers(Cookies.get('adminToken'), page, limit);\n\n            case 3:\n              data = _context2.sent;\n              setState(data);\n              console.log(data);\n              setLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function init() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    init();\n  }, []);\n  useEffect(function () {\n    init();\n  }, [page]);\n  return __jsx(\"div\", null, __jsx(\"section\", {\n    className: \"jsx-552793321\" + \" \" + 'page-section min-section pt-30 mt-40'\n  }, __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'container min-section'\n  }, __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'row mt-10 mb-30'\n  }), __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'col-md-12'\n  }, userPopup ? __jsx(ViewUserPopup, {\n    setViewUserPopup: setUserPopup,\n    user: user\n  }) : '', loading ? __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'loader'\n  }, \"Cargando...\") : __jsx(Table, {\n    responsive: \"sm\",\n    className: \"table table-striped\"\n  }, __jsx(\"tbody\", {\n    className: \"jsx-552793321\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-552793321\"\n  }, __jsx(\"th\", {\n    className: \"jsx-552793321\" + \" \" + 'hidden-xs'\n  }), __jsx(\"th\", {\n    className: \"jsx-552793321\"\n  }, \"Nombre de usuario\"), __jsx(\"th\", {\n    className: \"jsx-552793321\"\n  }, \"Email\"), __jsx(\"th\", {\n    className: \"jsx-552793321\"\n  }, \"Contacto\"), __jsx(\"th\", {\n    className: \"jsx-552793321\"\n  }, \"Fecha de nacimiento\"), __jsx(\"th\", {\n    className: \"jsx-552793321\" + \" \" + 'hidden-xs'\n  })), state.map(function (user, index) {\n    return __jsx(React.Fragment, null, __jsx(\"tr\", {\n      className: \"jsx-552793321\"\n    }, __jsx(\"td\", {\n      className: \"jsx-552793321\" + \" \" + 'hidden-xs'\n    }), __jsx(\"td\", {\n      className: \"jsx-552793321\"\n    }, __jsx(\"button\", {\n      onClick: function onClick(e) {\n        setUser(user);\n        setUserPopup(!userPopup);\n      },\n      className: \"jsx-552793321\" + \" \" + 'btn orange'\n    }, user.firstName, \" \", user.lastName)), __jsx(\"td\", {\n      className: \"jsx-552793321\"\n    }, user.email), __jsx(\"td\", {\n      className: \"jsx-552793321\"\n    }, user.phone), __jsx(\"td\", {\n      className: \"jsx-552793321\"\n    }, moment(user.date).format('DD/MM/YYYY hh:mm')), __jsx(\"td\", {\n      className: \"jsx-552793321\" + \" \" + 'hidden-xs'\n    })));\n  }))))), __jsx(\"div\", {\n    className: \"jsx-552793321\" + \" \" + 'pagination'\n  }, __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      page > 1 ? setPage(page - 1) : setPage(page);\n    },\n    className: \"jsx-552793321\"\n  }, __jsx(\"i\", {\n    className: \"jsx-552793321\" + \" \" + 'fa fa-angle-left'\n  })), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page);\n    },\n    className: \"jsx-552793321\" + \" \" + 'active'\n  }, page), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 1);\n    },\n    className: \"jsx-552793321\"\n  }, page + 1), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 2);\n    },\n    className: \"jsx-552793321\"\n  }, page + 2), __jsx(\"a\", {\n    className: \"jsx-552793321\" + \" \" + 'no-active'\n  }, \"...\"), __jsx(\"a\", {\n    href: \"\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      setPage(page + 1);\n    },\n    className: \"jsx-552793321\"\n  }, __jsx(\"i\", {\n    className: \"jsx-552793321\" + \" \" + 'fa fa-angle-right'\n  })))), __jsx(_JSXStyle, {\n    id: \"552793321\"\n  }, [\".min-section.jsx-552793321{background:white;background-image:url('../images/bkg-neutro.jpg') !important;background-attachment:fixed;background-repeat:no-repeat;background-size:cover;}\", \".btn.jsx-552793321{background:white;margin:0px;padding:0px;}\", \".min-section.jsx-552793321{max-height:900vh;min-height:80vh;overflow:auto;white-space:nowrap;}\", \".page-section.jsx-552793321{max-height:100vh;}\", \".btn.jsx-552793321{background:transparent;margin:0px;padding:0px;}\"])));\n};\n\nexport default Users;","map":null,"metadata":{},"sourceType":"module"}
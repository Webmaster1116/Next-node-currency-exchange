{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport Link from 'next/link';\nimport Cookies from 'js-cookie';\nimport Account from './Account';\nimport Axios from 'axios';\nimport AlertContext from '../../context/alert/alertContext';\nimport BankList from '../../Data/BankList';\n\nconst getAccounts = async token => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const res = await Axios.get('https://api.moni.pe/api/accounts/', header);\n  return res.data;\n};\n\nconst addAccount = async (token, body) => {\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  }; // console.log(body);\n\n  const res = await Axios.post('https://api.moni.pe/api/accounts', body, header).catch(err => console.log(err));\n  return res;\n};\n\nconst BankAccounts = props => {\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert,\n    alerts\n  } = alertContext;\n  const {\n    0: banks,\n    1: setBanks\n  } = useState('');\n  const {\n    0: addBank,\n    1: setAddBank\n  } = useState(false);\n  const {\n    0: accountNumber,\n    1: setAccountNumber\n  } = useState('');\n  const {\n    0: nickname,\n    1: setNickname\n  } = useState('');\n  const {\n    0: bankName,\n    1: setBankName\n  } = useState(BankList[0]);\n  const {\n    0: accountTypeOption,\n    1: setAccountTypeOption\n  } = useState(['Ahorros', 'Corriente']);\n  const {\n    0: type,\n    1: setType\n  } = useState(accountTypeOption[0]);\n  const {\n    0: currencyType,\n    1: setCurrencyType\n  } = useState('Soles');\n  const {\n    0: bankUser,\n    1: setBankUser\n  } = useState('');\n  const token = Cookies.get('token');\n\n  const init = async () => {\n    try {\n      const res = await getAccounts(token); // console.log('res', res);\n\n      setBanks(res);\n    } catch (error) {// setAlert(\"Por favor inicie sesiÃ³n para continuar\", \"danger\");\n      // Router.push(\"/login\");\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleBankAdd = async e => {\n    e.preventDefault(); // console.log('asasas', bankName.name, bankName.short);\n\n    const body = {\n      bankName: bankName.name,\n      bankShort: bankName.short,\n      accountNumber,\n      type,\n      nickname,\n      currency: currencyType,\n      bankUser\n    }; // console.log(body);\n\n    const res = await addAccount(token, body);\n    window.location.reload();\n  };\n\n  if (banks === '') {\n    return __jsx(\"div\", {\n      className: \"page-loader\"\n    }, __jsx(\"div\", {\n      className: \"loader\"\n    }, \"Cargando...\"));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"section\", {\n    className: \"jsx-1841335760\" + \" \" + 'page-section pt-90 pb-20'\n  }, __jsx(\"form\", {\n    className: \"jsx-1841335760\" + \" \" + 'form-normal'\n  }, __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'container align-left'\n  }, __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-4 col-xs-12 mt-30 padding0'\n  }, __jsx(\"dl\", {\n    className: \"jsx-1841335760\" + \" \" + 'toggle'\n  }, __jsx(React.Fragment, null, __jsx(\"dt\", {\n    className: \"jsx-1841335760\"\n  }, __jsx(\"button\", {\n    onClick: e => {\n      e.preventDefault();\n      setAddBank(!addBank);\n    },\n    className: \"jsx-1841335760\" + \" \" + 'btn btn-mod btn-border-w btn-circle btn-alerta'\n  }, __jsx(\"i\", {\n    className: \"jsx-1841335760\" + \" \" + 'fa fa-plus fa-2x'\n  }), \" A\\xF1adir nueva cuenta\")), __jsx(\"dd\", {\n    style: addBank ? {\n      display: 'block'\n    } : {\n      display: 'none'\n    },\n    className: \"jsx-1841335760\" + \" \" + 'mb-30'\n  }, __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'container padding0'\n  }, __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-4 col-xs-12 padding0'\n  }, __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10'\n  }, \"Tipo de cuenta\"), __jsx(\"select\", {\n    onChange: e => setType(e.target.value),\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  }, accountTypeOption.map((option, index) => {\n    // console.log(option);\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"option\", {\n      value: option,\n      className: \"jsx-1841335760\"\n    }, option));\n  })), __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10 mt-20'\n  }, \"Moneda\"), __jsx(\"select\", {\n    onChange: e => {\n      setCurrencyType(e.target.value);\n    },\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  }, __jsx(\"option\", {\n    value: 'Soles',\n    className: \"jsx-1841335760\"\n  }, \"Soles(S/.)\"), __jsx(\"option\", {\n    value: 'Dollars',\n    className: \"jsx-1841335760\"\n  }, \"Dollars($)\")), __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10  mt-20'\n  }, \"Nombre para recordar mi cuenta\"), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"BBVA Soles\",\n    pattern: \".{3,100}\",\n    value: nickname,\n    onChange: e => {\n      setNickname(e.target.value);\n    },\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  })), __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-1 col-xs-12 padding0'\n  }), __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-6 col-xs-12 padding0'\n  }, __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10  mt-20'\n  }, \"Banco\"), __jsx(\"select\", {\n    onChange: e => {\n      setBankName(JSON.parse(e.target.value));\n    },\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  }, BankList.map((country, index) => {\n    return __jsx(\"option\", {\n      key: index,\n      value: JSON.stringify(country),\n      className: \"jsx-1841335760\"\n    }, country.name);\n  }), ' '), __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10  mt-20'\n  }, \"N\\xFAmero de cuenta\"), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"001101520200382495\",\n    pattern: \".{3,100}\",\n    value: accountNumber,\n    onChange: e => {\n      setAccountNumber(e.target.value);\n    },\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  }), __jsx(\"h5\", {\n    className: \"jsx-1841335760\" + \" \" + 'black bold mb-10  mt-20'\n  }, \"Nombre de la cuenta bancaria\"), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Nombre\",\n    value: bankUser,\n    onChange: e => {\n      setBankUser(e.target.value);\n    },\n    className: \"jsx-1841335760\" + \" \" + 'input-sm'\n  }), __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-6 col-xs-12 mt-30 padding0'\n  }), __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-md-6 col-xs-12 mt-30 padding0'\n  }, __jsx(\"a\", {\n    onClick: handleBankAdd,\n    className: \"jsx-1841335760\" + \" \" + 'btn btn-mod btn-color btn-large btn-circle'\n  }, __jsx(\"i\", {\n    className: \"jsx-1841335760\" + \" \" + 'fa fa-plus fa-2x'\n  }), \" A\\xF1adir\")))))))), __jsx(\"div\", {\n    className: \"jsx-1841335760\" + \" \" + 'col-sm-12 mb-xs-40 padding0 mt-30'\n  }, __jsx(\"dl\", {\n    className: \"jsx-1841335760\" + \" \" + 'toggle'\n  }, banks.map((bank, index) => {\n    return __jsx(Account, {\n      data: bank\n    });\n  })))))), __jsx(_JSXStyle, {\n    id: \"1841335760\"\n  }, [\"section.jsx-1841335760{background:white;background-image:url('images/bkg-neutro.jpg');background-attachment:fixed;background-repeat:no-repeat;background-size:cover;min-height:100vh;}\", \".btn-a.jsx-1841335760{background:transparent;color:#333;font-size:22px;font-weight:600;border:none;}\"]));\n};\n\nexport default BankAccounts;","map":null,"metadata":{},"sourceType":"module"}
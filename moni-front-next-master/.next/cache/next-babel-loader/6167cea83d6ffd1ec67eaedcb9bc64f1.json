{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport getProfile from '../genericFunctions/getProfile';\nimport getAllTransactions from '../genericFunctions/getAllTransactions';\nimport loggedUser from '../genericFunctions/loggedUser';\nimport sendMail from '../genericFunctions/sendMail';\nimport Axios from 'axios';\nimport moment from 'moment';\nimport Hist from './HIstoryComp';\n\nconst History = props => {\n  const token = Cookies.get('token');\n  const {\n    0: state,\n    1: setState\n  } = useState(false);\n  const {\n    0: profileDetails,\n    1: setProfileDetails\n  } = useState('');\n  const {\n    0: displayClass,\n    1: setDisplay\n  } = useState(false);\n  const {\n    0: listClass,\n    1: setListClass\n  } = useState([]);\n  const {\n    0: debug,\n    1: setDebug\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: savingsDollars,\n    1: setSavingsDollars\n  } = useState(0);\n  const {\n    0: savingsSoles,\n    1: setSavingsSoles\n  } = useState(0);\n  const dollarsName = 'DÃ³lares';\n\n  const init = async () => {\n    setLoading(false);\n\n    if (token === undefined) {\n      window.location.href = '/login';\n    }\n\n    const id = await loggedUser(token);\n    const user = {\n      user: {\n        id: id\n      }\n    };\n    console.log(user, 'xxxxxx');\n    const data = await getAllTransactions(token, user);\n    let t = 0,\n        t2 = 0;\n\n    for (let i = 0; i < data.length; i++) {\n      console.log(data[i]);\n      if (data[i].transaction.currencyTo === 'Dollars' && data[i].transaction.status === 'Finalizado') t += parseFloat(data[i].transaction.savings) * parseFloat(data[i].transaction.exchange);else if (data[i].transaction.currencyTo === 'Soles' && data[i].transaction.status === 'Finalizado') t2 += parseFloat(data[i].transaction.savings);\n    }\n\n    console.log(t, ' t');\n    setSavingsDollars(t);\n    setSavingsSoles(t2);\n    const profile = await getProfile(token);\n    console.log(profile);\n    console.log(data);\n    console.log(debug);\n    setState(data);\n    setLoading(true);\n  }; // init();\n\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  if (loading === false) {\n    return __jsx(\"div\", {\n      className: \"jsx-3868796514\" + \" \" + 'min-section'\n    }, __jsx(\"div\", {\n      className: \"jsx-3868796514\" + \" \" + 'loader'\n    }, \"Cargando...\"), __jsx(_JSXStyle, {\n      id: \"3868796514\"\n    }, [\".min-section.jsx-3868796514{background:white;background-image:url('images/bkg-neutro.jpg');background-attachment:fixed;background-repeat:no-repeat;background-size:cover;min-height:100vh;}\"]));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"section\", {\n    className: \"jsx-812221516\" + \" \" + 'page-section bg-gray pb-10 pt-70'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'relative container align-left'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'row'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'container'\n  }, __jsx(\"ul\", {\n    className: \"jsx-812221516\" + \" \" + 'nav nav-tabs tpl-tabs animate'\n  }, __jsx(\"li\", {\n    className: \"jsx-812221516\" + \" \" + 'active'\n  }, __jsx(\"a\", {\n    href: \"#one\",\n    \"data-toggle\": \"tab\",\n    \"aria-expanded\": \"true\",\n    className: \"jsx-812221516\"\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'alt-features-icon'\n  }, __jsx(\"i\", {\n    className: \"jsx-812221516\" + \" \" + 'fa fa-clock-o'\n  }), ' '), \"Pago pendiente\")), __jsx(\"li\", {\n    className: \"jsx-812221516\"\n  }, __jsx(\"a\", {\n    href: \"#two\",\n    \"data-toggle\": \"tab\",\n    \"aria-expanded\": \"false\",\n    className: \"jsx-812221516\"\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'alt-features-icon'\n  }, __jsx(\"i\", {\n    className: \"jsx-812221516\" + \" \" + 'fa fa-share'\n  })), \"Pago realizado\")), __jsx(\"li\", {\n    className: \"jsx-812221516\"\n  }, __jsx(\"a\", {\n    href: \"#three\",\n    \"data-toggle\": \"tab\",\n    \"aria-expanded\": \"false\",\n    className: \"jsx-812221516\"\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'alt-features-icon'\n  }, __jsx(\"i\", {\n    className: \"jsx-812221516\" + \" \" + 'fa fa-check-circle'\n  })), \"Finalizado\")), __jsx(\"li\", {\n    className: \"jsx-812221516\"\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'alt-service-item black mt-30'\n  }, \"S/\", __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'count-number orange'\n  }, parseFloat(savingsSoles + savingsDollars).toFixed(2), '  '), __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'count-descr'\n  }, __jsx(\"h3\", {\n    className: \"jsx-812221516\" + \" \" + 'bold mt-0 mb-0'\n  }, \"Ahorro acumulado\"))))))))), __jsx(\"section\", {\n    className: \"jsx-812221516\" + \" \" + 'page-section pt-0 pb-20 min-section'\n  }, __jsx(\"form\", {\n    className: \"jsx-812221516\" + \" \" + 'form-normal'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'container align-left'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'col-sm-12 padding0'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'tab-content tpl-tabs-cont section-text'\n  }, __jsx(\"div\", {\n    id: \"one\",\n    className: \"jsx-812221516\" + \" \" + 'tab-pane fade active in'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'relative mb-xs-40'\n  }, __jsx(\"dl\", {\n    className: \"jsx-812221516\" + \" \" + 'toggle'\n  }, state.filter(op => op.transaction.status === 'Pago pendiente').map((operation, index) => {\n    console.log(operation);\n    return __jsx(Hist, {\n      data: operation\n    });\n  })))), __jsx(\"div\", {\n    id: \"two\",\n    className: \"jsx-812221516\" + \" \" + 'tab-pane fade'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'relative mb-xs-40'\n  }, __jsx(\"dl\", {\n    className: \"jsx-812221516\" + \" \" + 'toggle'\n  }, state.filter(op => op.transaction.status === 'Pago realizado').map((operation, index) => {\n    console.log(operation);\n    return __jsx(Hist, {\n      data: operation\n    });\n  })))), __jsx(\"div\", {\n    id: \"three\",\n    className: \"jsx-812221516\" + \" \" + 'tab-pane fade'\n  }, __jsx(\"div\", {\n    className: \"jsx-812221516\" + \" \" + 'relative mb-xs-40'\n  }, __jsx(\"dl\", {\n    className: \"jsx-812221516\" + \" \" + 'toggle'\n  }, state.filter(op => op.transaction.status === 'Finalizado').map((operation, index) => {\n    console.log(operation);\n    return __jsx(Hist, {\n      data: operation\n    });\n  }))))))))), __jsx(_JSXStyle, {\n    id: \"812221516\"\n  }, [\".min-section.jsx-812221516{background:white;background-image:url('images/bkg-neutro.jpg');background-attachment:fixed;background-repeat:no-repeat;background-size:cover;min-height:80vh;}\", \".btn-a.jsx-812221516{background:transparent;color:#333;font-size:22px;font-weight:600;border:none;}\"]));\n};\n\nexport default History;\n\nconst changeStatus = async (token, id, amountReceive, amountToPay, currencyTo, currencyFrom, status) => {\n  const body = {\n    transaction: {\n      amountReceive,\n      amountToPay,\n      currencyTo,\n      currencyFrom,\n      status\n    }\n  };\n  console.log(body, 'bodu');\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const res = await Axios.put('https://api.moni.pe/api/operations/' + id, body, header);\n  console.log(res.data, 'EDited data');\n  return res.data;\n};","map":null,"metadata":{},"sourceType":"module"}
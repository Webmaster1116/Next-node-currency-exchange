{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Logincontext from '../../context/LoginContext';\nimport UserContext from '../../context/UserContext';\nimport AlertContext from '../../context/alert/alertContext';\nimport { FaEye, FaEyeSlash } from 'react-icons/fa';\nimport Router, { withRouter } from 'next/router';\nimport Axios from 'axios';\nimport Link from 'next/link'; // import cookies from \"next-cookies\";\n\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport { Route } from 'react-router-dom';\nimport { route } from 'next/dist/next-server/server/router';\nexport const Login = () => {\n  const {\n    0: username,\n    1: setUsername\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const context = useContext(Logincontext);\n  const {\n    state,\n    addToken,\n    addName\n  } = useContext(UserContext);\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert,\n    alerts\n  } = alertContext;\n  const {\n    0: awaitData,\n    1: setAwaitData\n  } = useState(false);\n  const {\n    0: showPassword,\n    1: setShowPassword\n  } = useState(false); // useEffect(() => {\n  //   NotificationManager.info(\"Please login to continue\", \"Hola\");\n  // }, []);\n\n  const handleLogin = async e => {\n    e.preventDefault();\n    const body = {\n      email: username,\n      password: password\n    };\n    setAwaitData(true);\n\n    try {\n      if (body.email === '' || body.password === '') {\n        setAlert('Por favor llena todos los espacios', 'danger');\n        setAwaitData(false);\n      } else {\n        const res = await Axios.post('https://api.moni.pe/api/auth', body);\n        console.log(res, 'resss');\n        await addToken(res.data.token);\n        Cookies.set('token', res.data.token);\n        Router.push('/operation');\n        const header = {\n          headers: {\n            'x-auth-token': state.token\n          }\n        };\n        const data = await Axios.get('https://api.moni.pe/api/auth', header);\n        await addName(data.data.name);\n      }\n    } catch (error) {\n      if (error.response.data.msg === 'Your account has not been verified.') {\n        Router.push('/resend');\n      }\n\n      setAlert(error.response.data.msg, 'danger');\n      setAwaitData(false);\n    }\n  };\n\n  const togglePassword = e => {\n    e.preventDefault();\n    setShowPassword(!showPassword);\n  };\n\n  if (awaitData === true) {\n    return __jsx(\"div\", {\n      className: \"form-container w-100 h-100\"\n    }, __jsx(\"div\", {\n      className: \"loader\"\n    }, __jsx(Loader, null)), __jsx(\"style\", null, `\n        .form-container {\n          height: 100vh !important;\n          // background: #071127;\n          }\n        `));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"register-container\"\n  }, __jsx(NotificationContainer, null), __jsx(\"h1\", null, \"Iniciar sesi\\xF3n\"), __jsx(\"form\", {\n    className: \"\"\n  }, __jsx(\"div\", {\n    className: \"form-row\"\n  }, __jsx(\"div\", {\n    className: \"input-group col-md-12 col-sm-12\"\n  }, __jsx(\"input\", {\n    className: \"form-control\",\n    type: \"email\",\n    placeholder: \"Correo electr\\xF3nico\",\n    value: username,\n    onChange: e => {\n      setUsername(e.target.value);\n    }\n  })), __jsx(\"div\", {\n    className: \"input-group col-md-12 col-sm-12 mt-4\"\n  }, __jsx(\"input\", {\n    className: \"form-control form-icon\",\n    type: showPassword ? 'text' : 'password',\n    placeholder: \"Contrase\\xF1a\",\n    value: password,\n    onChange: e => {\n      setPassword(e.target.value);\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-icon input-group-addon\",\n    onClick: togglePassword\n  }, showPassword ? __jsx(FaEye, null) : __jsx(FaEyeSlash, null))), __jsx(\"label\", null, __jsx(\"button\", {\n    className: \"mt-3 btn forget\",\n    onClick: e => {\n      e.preventDefault();\n      Router.push('/forgetpassword');\n    }\n  }, \"Forget password\"))), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"login-btn btn btn-primary mt-4\",\n    onClick: handleLogin\n  }, \"Iniciar sesi\\xF3n\"), __jsx(Link, {\n    href: \"/admin_login\"\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"login-btn btn btn-secondary\"\n  }, \"Administrador\"))), __jsx(\"style\", null, `\n          html {\n            height: 100%;\n            background-color: rgba(7, 17, 39, 1);\n          }\n          .register-container {\n            text-align: center;\n            margin: 100px auto;\n            width: 400px;\n            height: 450px;\n            align-items: center;\n            background-color: rgba(13, 27, 65, 0.9);\n            // background: #071127;\n            border-radius: 10px;\n            padding: 50px;\n            position: fixed;\n            padding: 50px;\n            left: 50%;\n            top: 20%;\n            transform: translate(-50%, -20%);\n          }\n          .form-group {\n            padding: 5px !important ;\n          }\n          form {\n            padding: 30px;\n          }\n          \n          .login-btn {\n            margin: 10px;\n          }\n          \n          .loader {\n            textt-align: center\n          }\n        \n          .form-container {\n            background: #071127;\n          }\n          .btn {\n            color: white;\n          }\n          .btn-icon , .btn-icon:hover {\n            color: black;\n            position: relative;\n            background: white;\n            border: none;\n            border-top-left-radius: 0px;\n            border-bottom-left-radius: 0px;\n          }\n          .form-icon {\n            border-right: none;\n          }\n\n          .forget , .forget:hover {\n            color: white;\n            text-align: left;\n            font-size: 0.75em;\n          }\n        `)));\n};\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}
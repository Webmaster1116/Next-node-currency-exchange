{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport Axios from 'axios';\nimport BankAccountsEdit from './BankAccountsEdit';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { withRouter } from 'next/router';\n\nvar BankAccountsView = function BankAccountsView() {\n  var _useState = useState(''),\n      bankName = _useState[0],\n      setBankName = _useState[1];\n\n  var _useState2 = useState(''),\n      currencyType = _useState2[0],\n      setCurrencyType = _useState2[1];\n\n  var _useState3 = useState(''),\n      accountType = _useState3[0],\n      SetAccountType = _useState3[1];\n\n  var _useState4 = useState(''),\n      accountNumber = _useState4[0],\n      setAccountNumber = _useState4[1];\n\n  var _useState5 = useState(''),\n      nickname = _useState5[0],\n      setNickname = _useState5[1];\n\n  var _useContext = useContext(UserContext),\n      state = _useContext.state,\n      addToken = _useContext.addToken,\n      addName = _useContext.addName;\n\n  var _useState6 = useState(''),\n      banks = _useState6[0],\n      setBanks = _useState6[1];\n\n  var _useState7 = useState(false),\n      showEdit = _useState7[0],\n      setShowEdit = _useState7[1];\n\n  var alertContext = useContext(AlertContext);\n  var setAlert = alertContext.setAlert,\n      alerts = alertContext.alerts;\n\n  var _useState8 = useState(''),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState(''),\n      editRequest = _useState9[0],\n      setEditRequest = _useState9[1];\n\n  var init = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var header, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              header = {\n                headers: {\n                  'x-auth-token': Cookies.get('token')\n                }\n              };\n              _context.next = 4;\n              return Axios.get('https://api.moni.pe/api/accounts/', header);\n\n            case 4:\n              res = _context.sent;\n              setBanks(res.data);\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              setAlert('Por favor inicie sesi√≥n para continuar', 'danger');\n              Router.push('/login');\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function init() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    init();\n  }, []);\n\n  var handleEdit = function handleEdit(data, request) {\n    console.log('da', data._id);\n    setData(data);\n    setEditRequest(request);\n    console.log(editRequest);\n    setShowEdit(!showEdit);\n    init();\n  };\n\n  if (showEdit === true) {\n    {\n      return __jsx(BankAccountsEdit, {\n        data: data,\n        handleShowEdit: handleEdit,\n        state: showEdit,\n        request: editRequest\n      });\n    }\n  }\n\n  if (banks === '') {\n    return __jsx(\"div\", {\n      className: \"form-container w-100\"\n    }, __jsx(\"h2\", null, __jsx(Loader, null)));\n  }\n\n  return __jsx(\"div\", {\n    className: \"form-container w-100\"\n  }, __jsx(\"h2\", {\n    className: \"mb-5\"\n  }, \"Detalles de cuenta bancaria\"), banks.map(function (data, index) {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: \"row mt-4\"\n    }, __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"N\\xFAmero de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.accountNumber))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.type))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Nombre del banco\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.bankName))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Due\\xF1o de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.nickname || ''))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de moneda\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.currency))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"button\", {\n      className: \"mt-4 mb-0 btn blue-btn\",\n      onClick: function onClick() {\n        return handleEdit(data, 'edit');\n      }\n    }, \"Editar\")))));\n  }), __jsx(\"button\", {\n    className: \"btn outline-btn mt-5 btn-long\",\n    onClick: function onClick() {\n      return handleEdit('', 'add');\n    }\n  }, \"Agregar cuenta bancaria\"));\n};\n\nexport default BankAccountsView;","map":null,"metadata":{},"sourceType":"module"}
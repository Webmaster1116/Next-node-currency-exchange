{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport Axios from 'axios';\nimport country_list from '../../Data/Country_List';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { useRouter } from 'next/router'; // import Cookies from \"js-cookie\";\n\nvar Reg = function Reg(props) {\n  var router = useRouter();\n  var context = useContext(AlertContext);\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(['DNI', 'CE', 'Passport']),\n      docsList = _useState2[0];\n\n  useEffect(function () {\n    var init = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var coo;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                coo = Cookies.get('adminToken');\n\n                if (coo !== undefined) {\n                  console.log('all set');\n                } else {\n                  window.location.href = '/admin_login';\n                  setAlert('Admin Login First', 'danger');\n                }\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function init() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    init();\n  });\n\n  var handleRegister = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var _props$values, name, firstName, lastName, password, email, phone, dni, accountType, address, companyName, ruc, body, header, res, token, header1, body2, res1;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              setLoading(true);\n              console.log(props);\n              _props$values = props.values, name = _props$values.name, firstName = _props$values.firstName, lastName = _props$values.lastName, password = _props$values.password, email = _props$values.email, phone = _props$values.phone, dni = _props$values.dni, accountType = _props$values.accountType, address = _props$values.address, companyName = _props$values.companyName, ruc = _props$values.ruc;\n              body = {\n                name: name,\n                email: email,\n                password: password\n              }; // const { state, addToken, addName } = useContext(UserContext);\n\n              console.log(body, 'body');\n              _context2.prev = 6;\n              header = {\n                headers: {\n                  'x-auth-token': Cookies.get('adminToken')\n                }\n              };\n              _context2.next = 10;\n              return Axios.post('https://api.moni.pe/api/agent/new', body, header);\n\n            case 10:\n              res = _context2.sent;\n              //   console.log(\"res of /api/users\", res);\n              token = res.data.token;\n              header1 = {\n                headers: {\n                  'x-auth-token': token\n                }\n              };\n              console.log(res.headers);\n              body2 = {\n                firstName: firstName,\n                lastName: lastName,\n                email: email,\n                phone: phone,\n                dni: dni,\n                accountType: accountType,\n                address: address,\n                companyName: companyName,\n                ruc: ruc\n              };\n              console.log('body2', body2);\n              _context2.prev = 16;\n              _context2.next = 19;\n              return Axios.post('https://api.moni.pe/api/agentprofile', body2, header1);\n\n            case 19:\n              res1 = _context2.sent;\n              console.log('res of profiles', res1);\n              _context2.next = 26;\n              break;\n\n            case 23:\n              _context2.prev = 23;\n              _context2.t0 = _context2[\"catch\"](16);\n              context.setAlert('Detalles de perfil no válidos', 'danger');\n\n            case 26:\n              //   Cookies.set(\"agentToken\", res.data.token);\n              //   document.cookie = `type=${\"user\"};token=${res.data.token};path=/`;\n              //   document.cookie = `token=${res.data.token};path=/`;\n              console.log('pushing state..');\n              window.location.href = '/admin/admin_dashboard';\n              setLoading(false);\n              _context2.next = 35;\n              break;\n\n            case 31:\n              _context2.prev = 31;\n              _context2.t1 = _context2[\"catch\"](6);\n              setLoading(false);\n              context.setAlert('Correo electrónico ya tomado', 'danger');\n\n            case 35:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[6, 31], [16, 23]]);\n    }));\n\n    return function handleRegister(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  if (loading === true) {\n    return __jsx(\"div\", {\n      className: \"page-loader\"\n    }, __jsx(\"div\", {\n      className: \"loader\"\n    }, \"Cargando...\"));\n  }\n\n  return __jsx(\"section\", {\n    className: \"jsx-259516261\" + \" \" + 'page-section pt-10 pb-0 cust-div'\n  }, __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'home-content container'\n  }, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      e.preventDefault();\n      props.setRegisterOn(false);\n    },\n    className: \"jsx-259516261\" + \" \" + 'btn btn-custom'\n  }, __jsx(\"i\", {\n    style: {\n      position: 'absolute',\n      right: '5%',\n      top: '5%',\n      padding: '2px'\n    },\n    className: \"jsx-259516261\" + \" \" + 'fa fa-times'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'home-text'\n  }, __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'container align-center'\n  }, __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'row justify-content-md-center'\n  }, __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-sm-12 col'\n  }, __jsx(\"form\", {\n    className: \"jsx-259516261\" + \" \" + 'form'\n  }, __jsx(\"h1\", {\n    className: \"jsx-259516261\" + \" \" + 'section-title pt-10 pt-xs-10 mb-30 mb-sm-30'\n  }, \"Registro de agente\"), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'row justify-content-md-center'\n  }, __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-3 mb-20 mb-xs-20'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"firstName\",\n    id: \"usuario\",\n    placeholder: \"* Primer nomnbre\",\n    pattern: \".{3,100}\",\n    value: props.values.firstName,\n    onChange: props.handleChange('firstName'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-3 mb-20  mb-xs-20'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"lastName\",\n    id: \"apellido2\",\n    placeholder: \"* Apellido paterno\",\n    pattern: \".{3,100}\",\n    value: props.values.lastName,\n    onChange: props.handleChange('lastName'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-3  mb-20  mb-xs-20'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"secondName\",\n    id: \"apellido1\",\n    placeholder: \"Usuario\",\n    pattern: \".{3,100}\",\n    value: props.values.name,\n    onChange: props.handleChange('name'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-3 mb-20  mb-xs-20'\n  }, __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    id: \"contrasena\",\n    placeholder: \"Contrase\\xF1a\",\n    pattern: \".{3,100}\",\n    value: props.values.password,\n    onChange: props.handleChange('password'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  }), __jsx(\"i\", {\n    className: \"jsx-259516261\" + \" \" + 'fa fa-eye fa-2x campoform'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-4 mb-20 mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    id: \"email\",\n    placeholder: \"Email\",\n    pattern: \".{3,100}\",\n    value: props.values.email,\n    onChange: props.handleChange('email'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  }), __jsx(\"i\", {\n    className: \"jsx-259516261\" + \" \" + 'fa fa-envelope fa-2x campoform'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-4 mb-20  mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"documento\",\n    id: \"documento\",\n    placeholder: \"DNI\",\n    pattern: \".{3,100}\",\n    value: props.values.dni,\n    onChange: props.handleChange('dni'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-4 mb-20'\n  }, __jsx(\"select\", {\n    defaultValue: props.values.accountType,\n    onChange: props.handleChange('accountType'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm form'\n  }, __jsx(\"option\", {\n    defaultValue: true,\n    value: \"Personal\",\n    className: \"jsx-259516261\"\n  }, \"Personal\"), __jsx(\"option\", {\n    value: \"Empresa\",\n    className: \"jsx-259516261\"\n  }, \"Empresa\"))), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-12'\n  }), props.values.accountType === 'Empresa' ? __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-6 mb-20 mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"nacimiento\",\n    id: \"nacimiento\",\n    placeholder: \"Nombre de empresa\",\n    pattern: \".{3,100}\",\n    value: props.values.companyName,\n    onChange: props.handleChange('companyName'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })) : '', props.values.accountType === 'Empresa' ? __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-6 mb-20 mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"nacimiento\",\n    id: \"nacimiento\",\n    placeholder: \"RUC\",\n    pattern: \".{3,100}\",\n    value: props.values.ruc,\n    onChange: props.handleChange('ruc'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })) : '', __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-8 mb-20 mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"nacimiento\",\n    id: \"nacimiento\",\n    placeholder: \"Direccion\",\n    pattern: \".{3,100}\",\n    value: props.values.address,\n    onChange: props.handleChange('address'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-4 mb-20  mb-xs-0'\n  }, __jsx(\"input\", {\n    type: \"tel\",\n    name: \"tetefono\",\n    id: \"tetefono\",\n    placeholder: \"N\\xFAmero telef\\xF3nico\",\n    pattern: \".{3,100}\",\n    value: props.values.phone,\n    onChange: props.handleChange('phone'),\n    className: \"jsx-259516261\" + \" \" + 'input-sm bold'\n  }), __jsx(\"i\", {\n    className: \"jsx-259516261\" + \" \" + 'fa fa-phone fa-2x campoform'\n  })), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-6 mb-20'\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return props.setRegisterOn(false);\n    },\n    className: \"jsx-259516261\" + \" \" + 'btn btn-mod btn-color btn-border-w btn-large btn-circle mb-20'\n  }, \"Cerca\")), __jsx(\"div\", {\n    className: \"jsx-259516261\" + \" \" + 'col-md-6 mb-20'\n  }, __jsx(\"button\", {\n    onClick: handleRegister,\n    className: \"jsx-259516261\" + \" \" + 'btn btn-mod btn-color btn-border-w btn-large btn-circle mb-20'\n  }, \"e Registrarme\"))))))))), __jsx(_JSXStyle, {\n    id: \"259516261\"\n  }, [\".page-section.jsx-259516261{min-width:80vw;max-height:1400px;backround-color:white;max-width:1000px;border-radius:25px;z-index:999999;position:absolute;margin-left:auto;margin-right:auto;top:90px;left:0;right:0;text-align:center;}\", \".cust-div.jsx-259516261{background-color:white;color:black;box-shadow:3px 3px 20px rgba(0,0,0,0.12) !important;border-radius:25px !important;}\", \".btn-custom.jsx-259516261{background:transparent;}\", \"@media screen and (min-width:480px){}\"]));\n};\n\nexport default Reg;","map":null,"metadata":{},"sourceType":"module"}
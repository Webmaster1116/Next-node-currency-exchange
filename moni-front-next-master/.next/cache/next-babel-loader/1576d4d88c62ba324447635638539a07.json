{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport TopNav from '../components/Operation/TopNav';\nimport NewOperation from '../components/Operation/NewOperation';\nimport ProfileView from '../components/Operation/ProfileView';\nimport BankAccount from '../components/Operation/BankAccountsView';\nimport OperationHistory from '../components/Operation/OperationHistory';\nimport Layout from '../components/Layout';\nimport UserContext from '../context/UserContext';\nimport Fetch from 'isomorphic-unfetch';\nimport Cookies from 'js-cookie';\nimport Router from 'next/router';\nimport Navbar from '../components/Navbar2';\nimport Loader from '../components/Loader';\nimport Head from 'next/head';\n\nconst operation = props => {\n  const {\n    state,\n    isUserAuth\n  } = useContext(UserContext);\n  const {\n    0: isLogin,\n    1: setIsLogin\n  } = useState('');\n  useEffect(() => {\n    const init = async () => {\n      const coo = Cookies.get('token');\n      console.log('coo', coo);\n\n      if (coo != undefined) {\n        console.log('all set');\n        setIsLogin(true);\n      } else {\n        Router.push('/login');\n      }\n    };\n\n    init();\n  }, []);\n  const {\n    0: view,\n    1: setView\n  } = useState([__jsx(NewOperation, {\n    data: props\n  }), __jsx(ProfileView, null), __jsx(BankAccount, null), __jsx(OperationHistory, null)]);\n  const {\n    0: tab,\n    1: setTab\n  } = useState(0);\n\n  const handleClick = no => {\n    setTab(no);\n    console.log(no);\n    console.log(state[tab]);\n  }; // if (isLogin === \"\") {\n  //   return (\n  //     // <div className=\"operation-view w-100 h-100\">\n  //     <Loader />\n  //     // </div>\n  //   );\n  // }\n\n\n  return __jsx(React.Fragment, null, __jsx(Layout, null, __jsx(\"div\", {\n    className: \"jsx-2886016117\" + \" \" + 'appear-animate'\n  }, __jsx(\"div\", {\n    className: \"jsx-2886016117\" + \" \" + 'appear-animate'\n  }, __jsx(TopNav, {\n    handleClick: handleClick,\n    state: view[tab]\n  }), __jsx(NewOperation, {\n    data: props\n  })), __jsx(_JSXStyle, {\n    id: \"2886016117\"\n  }, [\"div.jsx-2886016117,section.jsx-2886016117{background:white;}\"]))));\n};\n\noperation.getInitialProps = async function () {\n  const res = await Fetch('https://api.coindesk.com/v1/bpi/currentprice.json');\n  const res2 = await Fetch('https://api.moni.pe/api/exchange/calculate?originCurrency=USD&destinationCurrency=PEN&amount=1');\n  const res3 = await Fetch('https://api.moni.pe/api/exchange/calculate?originCurrency=PEN&destinationCurrency=USD&amount=1'); // const res2 = { USD_PEN: \"3.133\" };\n  //testing\n\n  const data = await res.json(); // const data2 = await res2.json();\n\n  const data2 = await res2.json();\n  const data3 = await res3.json();\n  return {\n    soles: data2.rate,\n    usd: data3.rate,\n    savingsCompra: data2.ahorros,\n    savingsVenta: data3.ahorros,\n    bpi: data.bpi\n  };\n};\n\nexport default operation;","map":null,"metadata":{},"sourceType":"module"}